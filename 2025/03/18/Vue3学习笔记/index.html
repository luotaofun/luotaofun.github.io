<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.0.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"luotaofun.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.json","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="结束进程 1234567&#x2F;&#x2F; 杀进程netstat -ano | findstr :端口号taskkill &#x2F;pid 进程id &#x2F;f&#x2F;&#x2F; Python 自带了一个简单的 HTTP 服务器模块，可以直接用于静态文件的预览。以模块模式运行指定的 Python 模块。它的全称是 --module。cd distpython -m http.server 8000 Setup语法糖 基本使用方法">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3学习笔记">
<meta property="og:url" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Taoの博客">
<meta property="og:description" content="结束进程 1234567&#x2F;&#x2F; 杀进程netstat -ano | findstr :端口号taskkill &#x2F;pid 进程id &#x2F;f&#x2F;&#x2F; Python 自带了一个简单的 HTTP 服务器模块，可以直接用于静态文件的预览。以模块模式运行指定的 Python 模块。它的全称是 --module。cd distpython -m http.server 8000 Setup语法糖 基本使用方法">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250318152057798.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250319133253221.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250104151543030.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320021455569.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320135029082.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320135626427.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320135722595.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320140337010.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320141106962.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320141200490.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320141836425.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320142903447.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320152718722.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320152636282.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320161423768.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320161423768.png">
<meta property="og:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320164314641.png">
<meta property="article:published_time" content="2025-03-17T17:13:23.000Z">
<meta property="article:modified_time" content="2025-06-13T23:46:16.255Z">
<meta property="article:author" content="LuoTao">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250318152057798.png">


<link rel="canonical" href="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","path":"2025/03/18/Vue3学习笔记/","title":"Vue3学习笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Vue3学习笔记 | Taoの博客</title>
  




<!-- TailwindCSS
<script src="https://cdn.tailwindcss.com/3.4.4"></script>
 -->
<!-- Google Fonts (Noto Sans SC for Chinese, Poppins for English) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Caveat&family=Noto+Sans+SC:wght@300;400;500;700&family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">

<!-- Apache ECharts -->
<script src="https://cdn.jsdelivr.net/npm/echarts@5.5.1/dist/echarts.min.js"></script>

  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Taoの博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Best Tao.</p>

    <!--音乐播放器-->
	
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档<span class="badge">40</span></a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">
    <!--音乐播放器-->
	
    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E6%9D%9F%E8%BF%9B%E7%A8%8B"><span class="nav-number">1.</span> <span class="nav-text">结束进程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#setup%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="nav-number">1.1.</span> <span class="nav-text">Setup语法糖</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">1.1.1.</span> <span class="nav-text">基本使用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%99%AE%E9%80%9A%E7%9A%84composition-api%E5%86%99%E6%B3%95"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">1. 普通的Composition API写法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8setup%E8%AF%AD%E6%B3%95%E7%B3%96%E7%9A%84%E5%86%99%E6%B3%95"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">2. 使用Setup语法糖的写法</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setup%E8%AF%AD%E6%B3%95%E7%B3%96%E7%9A%84%E7%89%B9%E6%80%A7"><span class="nav-number">1.1.2.</span> <span class="nav-text">Setup语法糖的特性</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E6%9A%B4%E9%9C%B2%E5%8F%98%E9%87%8F%E5%92%8C%E5%87%BD%E6%95%B0"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">1. 自动暴露变量和函数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-defineprops-%E5%92%8C-defineemits"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">2. 使用
defineProps 和 defineEmits</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-defineexpose"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">3. 使用 defineExpose</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-useslots-%E5%92%8C-useattrs"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">4. 使用 useSlots 和
useAttrs</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A1%B6%E5%B1%82-await-%E6%94%AF%E6%8C%81"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">5. 顶层 await 支持</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8E%E6%99%AE%E9%80%9Asetup%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.1.3.</span> <span class="nav-text">与普通setup函数的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.1.4.</span> <span class="nav-text">实际开发示例</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B1%E8%AE%A1%E6%95%B0%E5%99%A8%E7%BB%84%E4%BB%B6"><span class="nav-number">1.1.4.1.</span> <span class="nav-text">示例1：计数器组件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B2api%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E7%BB%84%E4%BB%B6"><span class="nav-number">1.1.4.2.</span> <span class="nav-text">示例2：API数据获取组件</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="nav-number">1.1.5.</span> <span class="nav-text">最佳实践</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94"><span class="nav-number">1.1.6.</span> <span class="nav-text">常见问题解答</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F"><span class="nav-number">1.2.</span> <span class="nav-text">响应式系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%93%8D%E5%BA%94%E5%BC%8Fapi"><span class="nav-number">1.2.1.</span> <span class="nav-text">基本响应式API</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90"><span class="nav-number">1.3.</span> <span class="nav-text">生命周期钩子</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ref%E5%8F%AF%E4%BB%A5%E5%A3%B0%E6%98%8E%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="nav-number">2.</span> <span class="nav-text">ref可以声明基本数据类型和对象类型的响应式数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#reactive%E5%8F%AA%E8%83%BD%E5%A3%B0%E6%98%8E%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="nav-number">3.</span> <span class="nav-text">reactive只能声明对象类型的响应式数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#torefstoref"><span class="nav-number">4.</span> <span class="nav-text">toRefs()、toRef()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ref%E5%92%8Creactive%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">5.</span> <span class="nav-text">ref和reactive的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%87%8D%E6%96%B0%E5%88%86%E9%85%8D%E6%96%B0%E5%AF%B9%E8%B1%A1%E6%97%B6%E7%9A%84%E8%A1%8C%E4%B8%BA"><span class="nav-number">5.0.1.</span> <span class="nav-text">重新分配新对象时的行为</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7computed"><span class="nav-number">6.</span> <span class="nav-text">计算属性computed()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#watch-%E7%9B%91%E8%A7%86ref%E5%AE%9A%E4%B9%89%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="nav-number">7.</span> <span class="nav-text">【watch】-监视【ref】定义的【基本类型】数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#watch-%E7%9B%91%E8%A7%86ref%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="nav-number">8.</span> <span class="nav-text">【watch】-监视【ref】定义的【对象类型】数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#watch-%E7%9B%91%E8%A7%86reactive%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E6%95%B0%E6%8D%AE"><span class="nav-number">9.</span> <span class="nav-text">【watch】-监视【reactive】定义的【对象类型】数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#watch-%E7%9B%91%E8%A7%86ref%E6%88%96reactive%E5%AE%9A%E4%B9%89%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E4%B8%AD%E6%9F%90%E4%B8%AA%E5%B1%9E%E6%80%A7"><span class="nav-number">10.</span> <span class="nav-text">【watch】-监视ref或reactive定义的【对象类型】中某个属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#watcheffect"><span class="nav-number">11.</span> <span class="nav-text">【watchEffect】</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%87%E7%AD%BE%E7%9A%84ref%E5%B1%9E%E6%80%A7"><span class="nav-number">12.</span> <span class="nav-text">标签的【ref】属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ts%E4%B8%AD%E7%9A%84%E6%8E%A5%E5%8F%A3_%E6%B3%9B%E5%9E%8B_%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B"><span class="nav-number">13.</span> <span class="nav-text">TS中的接口_泛型_自定义类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#props%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">14.</span> <span class="nav-text">【props】的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue3%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">15.</span> <span class="nav-text">vue3生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89hooks"><span class="nav-number">16.</span> <span class="nav-text">自定义Hooks</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84query%E5%8F%82%E6%95%B0"><span class="nav-number">17.</span> <span class="nav-text">路由的query参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84param%E5%8F%82%E6%95%B0"><span class="nav-number">18.</span> <span class="nav-text">路由的param参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84props%E9%85%8D%E7%BD%AE"><span class="nav-number">18.1.</span> <span class="nav-text">路由的props配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#replace%E5%B1%9E%E6%80%A7"><span class="nav-number">19.</span> <span class="nav-text">replace属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA"><span class="nav-number">20.</span> <span class="nav-text">编程式路由导航</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8pinia%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="nav-number">21.</span> <span class="nav-text">使用pinia修改数据的三种方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#storetorefs"><span class="nav-number">22.</span> <span class="nav-text">storeToRefs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#subscribe%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">23.</span> <span class="nav-text">$subscribe的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F_props"><span class="nav-number">24.</span> <span class="nav-text">组件通信方式_props</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F_%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="nav-number">25.</span> <span class="nav-text">组件通信方式_自定义事件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F_mitt"><span class="nav-number">26.</span> <span class="nav-text">组件通信方式_mitt</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue3%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="nav-number">27.</span> <span class="nav-text">Vue3核心概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E7%B3%BB%E7%BB%9F-1"><span class="nav-number">27.1.</span> <span class="nav-text">响应式系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="nav-number">27.2.</span> <span class="nav-text">组件化</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"><span class="nav-number">28.</span> <span class="nav-text">组件通信方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F%E4%B9%8Bv-model"><span class="nav-number">28.1.</span> <span class="nav-text">组件通信方式之v-model</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F%E4%B9%8Battrs-%E6%8A%80%E6%9C%AF%E8%A7%A3%E9%87%8Aattrs%E5%8C%85%E5%90%AB%E7%88%B6%E7%BB%84%E4%BB%B6%E4%BC%A0%E9%80%92%E7%BB%99%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BD%86%E6%9C%AA%E8%A2%ABprops%E6%8E%A5%E6%94%B6%E7%9A%84%E6%89%80%E6%9C%89%E5%B1%9E%E6%80%A7vue3%E4%B8%AD%E4%B9%9F%E5%8C%85%E5%90%AB%E4%BA%86%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">28.2.</span> <span class="nav-text">组件通信方式之attrs * *技术解释 * *：attrs包含父组件传递给子组件但未被props接收的所有属性，Vue3中也包含了事件监听器。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F%E4%B9%8Brefs%E4%B8%8Eparent"><span class="nav-number">28.3.</span> <span class="nav-text">组件通信方式之refs与parent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F%E4%B9%8Bprovide_inject"><span class="nav-number">28.4.</span> <span class="nav-text">组件通信方式之provide_inject</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8F%92%E6%A7%BD%E7%B3%BB%E7%BB%9F"><span class="nav-number">29.</span> <span class="nav-text">插槽系统</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD"><span class="nav-number">29.1.</span> <span class="nav-text">默认插槽</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="nav-number">29.2.</span> <span class="nav-text">具名插槽</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="nav-number">29.3.</span> <span class="nav-text">作用域插槽</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E5%BC%8Fapi"><span class="nav-number">30.</span> <span class="nav-text">组合式API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#shallowref%E4%B8%8Eshallowreactive"><span class="nav-number">30.1.</span> <span class="nav-text">shallowRef与shallowReactive</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#readonly%E4%B8%8Eshallowreadonly"><span class="nav-number">30.2.</span> <span class="nav-text">readonly与shallowReadonly</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#toraw%E4%B8%8Emarkraw"><span class="nav-number">30.3.</span> <span class="nav-text">toRaw与markRaw</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#customref%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">30.4.</span> <span class="nav-text">customRef的使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7"><span class="nav-number">31.</span> <span class="nav-text">高级特性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#teleport"><span class="nav-number">31.1.</span> <span class="nav-text">Teleport</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#suspense"><span class="nav-number">31.2.</span> <span class="nav-text">Suspense</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98%E8%A7%A3%E6%9E%90"><span class="nav-number">31.3.</span> <span class="nav-text">高频面试题解析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#vue3%E4%B8%AD%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">31.3.1.</span> <span class="nav-text">1. Vue3中的响应式原理是什么？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#vue3%E4%B8%AD%E7%9A%84%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="nav-number">31.3.2.</span> <span class="nav-text">2. Vue3中的组件通信方式有哪些？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#vue3%E4%B8%AD%E7%9A%84%E7%BB%84%E5%90%88%E5%BC%8Fapi%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">31.3.3.</span> <span class="nav-text">3. Vue3中的组合式API是什么？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#vue3%E4%B8%AD%E7%9A%84teleport%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">31.3.4.</span> <span class="nav-text">4. Vue3中的Teleport是什么？</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#vue3%E4%B8%AD%E7%9A%84suspense%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">31.3.5.</span> <span class="nav-text">5. Vue3中的Suspense是什么？</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="LuoTao"
      src="/images/author.jpg">
  <p class="site-author-name" itemprop="name">LuoTao</p>
  <div class="site-description" itemprop="description"><font color="#FFFFFF">Best Tao.</font></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">40</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://wx.qq.com/" title="微信 → https:&#x2F;&#x2F;wx.qq.com&#x2F;" rel="noopener" target="_blank"><i class="weixin fa-fw"></i>微信</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://user.qzone.qq.com/3452255853" title="QQ → https:&#x2F;&#x2F;user.qzone.qq.com&#x2F;3452255853" rel="noopener" target="_blank"><i class="QQ fa-fw"></i>QQ</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/luotaofun" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;luotaofun" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:luotao0213@163.com" title="E-Mail → mailto:luotao0213@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/luotaofun" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://luotaofun.github.io/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/author.jpg">
      <meta itemprop="name" content="LuoTao">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Taoの博客">
      <meta itemprop="description" content="<font color="#FFFFFF">Best Tao.</font>">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Vue3学习笔记 | Taoの博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Vue3学习笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2025-03-18 01:13:23" itemprop="dateCreated datePublished" datetime="2025-03-18T01:13:23+08:00">2025-03-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2025-06-14 07:46:16" itemprop="dateModified" datetime="2025-06-14T07:46:16+08:00">2025-06-14</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="结束进程">结束进程</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 杀进程</span><br><span class="line">netstat -ano | findstr :端口号</span><br><span class="line">taskkill /pid 进程<span class="built_in">id</span> /f</span><br><span class="line"></span><br><span class="line">// Python 自带了一个简单的 HTTP 服务器模块，可以直接用于静态文件的预览。以模块模式运行指定的 Python 模块。它的全称是 --module。</span><br><span class="line"><span class="built_in">cd</span> dist</span><br><span class="line">python -m http.server 8000</span><br></pre></td></tr></table></figure>
<h3 id="setup语法糖">Setup语法糖</h3>
<h4 id="基本使用方法">基本使用方法</h4>
<h5 id="普通的composition-api写法">1. 普通的Composition API写法</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;Count: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  name:&quot;counter&quot;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const count = ref(0)</span><br><span class="line">    </span><br><span class="line">    function increment() &#123;</span><br><span class="line">      count.value++</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      console.log(&#x27;组件已挂载&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    // 必须返回要在模板中使用的内容</span><br><span class="line">    return &#123;</span><br><span class="line">      count,</span><br><span class="line">      increment</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h5 id="使用setup语法糖的写法">2. 使用Setup语法糖的写法</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;Count: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;增加&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; &gt;</span><br><span class="line">   export default&#123;</span><br><span class="line">        name:&quot;counter&quot;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 不再需要export default和setup函数</span><br><span class="line">const count = ref(0)</span><br><span class="line"></span><br><span class="line">function increment() &#123;</span><br><span class="line">  count.value++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;组件已挂载&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 不需要显式返回，顶层变量和函数自动暴露给模板</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="setup语法糖的特性">Setup语法糖的特性</h4>
<h5 id="自动暴露变量和函数">1. 自动暴露变量和函数</h5>
<p>在 <code>&lt;script setup&gt;</code>
中定义的顶层变量、函数和导入的内容都会自动暴露给模板，不需要通过
<code>return</code> 语句返回。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 导入的组件会自动注册</span><br><span class="line">import HelloWorld from &#x27;./HelloWorld.vue&#x27;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 声明的变量和函数自动可用于模板</span><br><span class="line">const message = ref(&#x27;Hello&#x27;)</span><br><span class="line">function updateMessage() &#123;</span><br><span class="line">  message.value = &#x27;Updated&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 可以直接使用上面定义的变量和方法 --&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;button @click=&quot;updateMessage&quot;&gt;更新&lt;/button&gt;</span><br><span class="line">  &lt;!-- 导入的组件可直接使用 --&gt;</span><br><span class="line">  &lt;HelloWorld /&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h5 id="使用-defineprops-和-defineemits">2. 使用
<code>defineProps</code> 和 <code>defineEmits</code></h5>
<p>在setup语法糖中，使用 <code>defineProps</code> 和
<code>defineEmits</code>
编译宏来声明props和emits，它们会自动导入并在编译时进行处理。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 声明props</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  title: String,</span><br><span class="line">  likes: &#123;</span><br><span class="line">    type: Number,</span><br><span class="line">    default: 0</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 声明emits</span><br><span class="line">const emit = defineEmits([&#x27;update&#x27;, &#x27;delete&#x27;])</span><br><span class="line"></span><br><span class="line">// 使用emit</span><br><span class="line">function handleClick() &#123;</span><br><span class="line">  emit(&#x27;update&#x27;, &#123; id: 1, value: &#x27;new value&#x27; &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123; title &#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;p&gt;Likes: &#123;&#123; likes &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;button @click=&quot;handleClick&quot;&gt;更新&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<h5 id="使用-defineexpose">3. 使用 <code>defineExpose</code></h5>
<p>默认情况下，<code>&lt;script setup&gt;</code>
组件是”封闭”的，即通过模板ref或$parent获取的组件实例不会暴露在
<code>&lt;script setup&gt;</code> 中声明的任何属性。要显式暴露属性，使用
<code>defineExpose</code> 编译宏：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const count = ref(0)</span><br><span class="line">const increment = () =&gt; count.value++</span><br><span class="line"></span><br><span class="line">// 显式暴露属性和方法给父组件</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  count,</span><br><span class="line">  increment</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>这就像是在”保密柜”中，你可以选择性地公开某些文件供他人查看。</p>
<h5 id="使用-useslots-和-useattrs">4. 使用 <code>useSlots</code> 和
<code>useAttrs</code></h5>
<p>访问slots和attrs可以使用 <code>useSlots</code> 和
<code>useAttrs</code> 辅助函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useSlots, useAttrs &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const slots = useSlots()</span><br><span class="line">const attrs = useAttrs()</span><br><span class="line"></span><br><span class="line">console.log(slots)</span><br><span class="line">console.log(attrs)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h5 id="顶层-await-支持">5. 顶层 <code>await</code> 支持</h5>
<p><code>&lt;script setup&gt;</code> 支持在顶层使用
<code>await</code>，这会自动将组件变为异步组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">// 顶层await - 组件会自动变为异步组件</span><br><span class="line">const data = await fetch(&#x27;/api/data&#x27;).then(r =&gt; r.json())</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>这就像是”边走边吃”——你可以在准备组件的过程中等待异步数据加载完成。</p>
<h4 id="与普通setup函数的区别">与普通setup函数的区别</h4>
<table>
<thead>
<tr>
<th>特性</th>
<th>普通setup函数</th>
<th>Setup语法糖</th>
</tr>
</thead>
<tbody>
<tr>
<td>代码量</td>
<td>较多，需要export default</td>
<td>更少，更简洁</td>
</tr>
<tr>
<td>暴露变量</td>
<td>需要手动return</td>
<td>自动暴露顶层变量</td>
</tr>
<tr>
<td>TypeScript支持</td>
<td>需要额外配置</td>
<td>更好的类型推断</td>
</tr>
<tr>
<td>组件注册</td>
<td>需要在components选项中注册</td>
<td>导入即自动注册</td>
</tr>
<tr>
<td>生命周期钩子</td>
<td>需要使用指定API</td>
<td>直接导入使用</td>
</tr>
<tr>
<td>获取实例</td>
<td>可以通过this访问</td>
<td>没有this，更函数式</td>
</tr>
</tbody>
</table>
<h4 id="实际开发示例">实际开发示例</h4>
<h5 id="示例1计数器组件">示例1：计数器组件</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;counter&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;p&gt;当前计数: &#123;&#123; count &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;div class=&quot;buttons&quot;&gt;</span><br><span class="line">      &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">      &lt;button @click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">      &lt;button @click=&quot;reset&quot;&gt;重置&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, computed, watch &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 接收props</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  title: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    default: &#x27;计数器&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  initialValue: &#123;</span><br><span class="line">    type: Number,</span><br><span class="line">    default: 0</span><br><span class="line">  &#125;,</span><br><span class="line">  step: &#123;</span><br><span class="line">    type: Number,</span><br><span class="line">    default: 1</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 声明事件</span><br><span class="line">const emit = defineEmits([&#x27;change&#x27;, &#x27;reset&#x27;])</span><br><span class="line"></span><br><span class="line">// 响应式状态</span><br><span class="line">const count = ref(props.initialValue)</span><br><span class="line"></span><br><span class="line">// 计算属性</span><br><span class="line">const doubleCount = computed(() =&gt; count.value * 2)</span><br><span class="line"></span><br><span class="line">// 方法</span><br><span class="line">function increment() &#123;</span><br><span class="line">  count.value += props.step</span><br><span class="line">  emit(&#x27;change&#x27;, count.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function decrement() &#123;</span><br><span class="line">  count.value -= props.step</span><br><span class="line">  emit(&#x27;change&#x27;, count.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function reset() &#123;</span><br><span class="line">  count.value = props.initialValue</span><br><span class="line">  emit(&#x27;reset&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 监听变化</span><br><span class="line">watch(count, (newValue) =&gt; &#123;</span><br><span class="line">  console.log(`计数已更改为: $&#123;newValue&#125;`)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 暴露给父组件的方法和属性</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  count,</span><br><span class="line">  reset,</span><br><span class="line">  doubleCount</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.counter &#123;</span><br><span class="line">  border: 1px solid #ddd;</span><br><span class="line">  padding: 15px;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  max-width: 300px;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.buttons &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  gap: 8px;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">button &#123;</span><br><span class="line">  padding: 5px 10px;</span><br><span class="line">  border: none;</span><br><span class="line">  background-color: #2c3e50;</span><br><span class="line">  color: white;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h5 id="示例2api数据获取组件">示例2：API数据获取组件</h5>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;user-profile&quot;&gt;</span><br><span class="line">    &lt;div v-if=&quot;loading&quot;&gt;加载中...&lt;/div&gt;</span><br><span class="line">    &lt;div v-else-if=&quot;error&quot;&gt;加载失败: &#123;&#123; error &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div v-else class=&quot;user-data&quot;&gt;</span><br><span class="line">      &lt;img :src=&quot;user.avatar&quot; alt=&quot;用户头像&quot;&gt;</span><br><span class="line">      &lt;h2&gt;&#123;&#123; user.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;p&gt;Email: &#123;&#123; user.email &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  userId: &#123;</span><br><span class="line">    type: Number,</span><br><span class="line">    required: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const user = ref(null)</span><br><span class="line">const loading = ref(true)</span><br><span class="line">const error = ref(null)</span><br><span class="line"></span><br><span class="line">// 使用async/await获取数据</span><br><span class="line">async function fetchUserData() &#123;</span><br><span class="line">  loading.value = true</span><br><span class="line">  error.value = null</span><br><span class="line">  </span><br><span class="line">  try &#123;</span><br><span class="line">    const response = await fetch(`https://api.example.com/users/$&#123;props.userId&#125;`)</span><br><span class="line">    if (!response.ok) &#123;</span><br><span class="line">      throw new Error(`API请求失败: $&#123;response.status&#125;`)</span><br><span class="line">    &#125;</span><br><span class="line">    user.value = await response.json()</span><br><span class="line">  &#125; catch (err) &#123;</span><br><span class="line">    error.value = err.message</span><br><span class="line">    console.error(&#x27;获取用户数据失败:&#x27;, err)</span><br><span class="line">  &#125; finally &#123;</span><br><span class="line">    loading.value = false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 当组件挂载时获取数据</span><br><span class="line">onMounted(fetchUserData)</span><br><span class="line"></span><br><span class="line">// 监听userId的变化重新获取数据</span><br><span class="line">watch(() =&gt; props.userId, fetchUserData)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h4 id="最佳实践">最佳实践</h4>
<ol type="1">
<li><strong>减少复杂度</strong>：将大型组件拆分为更小的可复用组件</li>
<li><strong>使用组合函数</strong>：将逻辑提取到独立的组合函数（Composables）中</li>
<li><strong>正确处理响应式</strong>：理解ref和reactive的区别</li>
<li><strong>组件通信</strong>：适当使用props和emits，复杂场景考虑使用provide/inject</li>
<li><strong>保持一致性</strong>：在项目中统一使用Setup语法糖或Options
API</li>
</ol>
<h4 id="常见问题解答">常见问题解答</h4>
<p><strong>问题1：<code>&lt;script setup&gt;</code>
中如何访问组件实例（this）？</strong></p>
<p>答：在<code>&lt;script setup&gt;</code>中没有<code>this</code>。这是函数式编程的一部分，所有需要的内容都应通过导入的API和组合函数获取。</p>
<p><strong>问题2：如何使用生命周期钩子？</strong></p>
<p>答：直接导入并调用生命周期钩子函数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; onMounted, onUnmounted &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;组件已挂载&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">onUnmounted(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;组件已卸载&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p><strong>问题3：如何使用依赖注入（provide/inject）？</strong></p>
<p>答：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 提供方 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; provide, ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const theme = ref(&#x27;light&#x27;)</span><br><span class="line">provide(&#x27;theme&#x27;, theme) // 提供响应式值</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 注入方 --&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; inject &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const theme = inject(&#x27;theme&#x27;, &#x27;light&#x27;) // 第二个参数是默认值</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h3 id="响应式系统">响应式系统</h3>
<p>Vue
3的响应式系统是框架的核心特性，它允许数据变化自动触发视图更新。在Composition
API中，响应式系统通过<code>ref</code>、<code>reactive</code>等API实现。</p>
<h4 id="基本响应式api">基本响应式API</h4>
<ol type="1">
<li><p><strong>ref</strong>：创建一个响应式的数据引用，适用于基本类型和对象
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> count = <span class="title function_">ref</span>(<span class="number">0</span>)  <span class="comment">// 基本类型</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(count.<span class="property">value</span>)  <span class="comment">// 必须使用.value访问</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = <span class="title function_">ref</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span> &#125;)  <span class="comment">// 对象</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">value</span>.<span class="property">name</span>)</span><br></pre></td></tr></table></figure></p></li>
<li><p><strong>reactive</strong>：创建一个响应式对象，仅适用于对象（不能用于原始值）
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;Bob&#x27;</span> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(state.<span class="property">count</span>)  <span class="comment">// 直接访问，不需要.value</span></span><br></pre></td></tr></table></figure></p></li>
</ol>
<h3 id="生命周期钩子">生命周期钩子</h3>
<p>Vue 3中的生命周期钩子允许你在组件不同阶段执行代码。在Composition
API中，生命周期钩子是以<code>on</code>开头的函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted, onUpdated, onUnmounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在setup中使用生命周期钩子</span></span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件已挂载&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">onUpdated</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件已更新&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件已卸载&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="ref可以声明基本数据类型和对象类型的响应式数据">ref可以声明基本数据类型和对象类型的响应式数据</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    .person&#123;</span><br><span class="line">        background-color: #ddd;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;h2&gt;一辆&#123;&#123;car.brand&#125;&#125;车，价值&#123;&#123;car.price&#125;&#125;万&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;changePrice&quot;&gt;改价格&lt;/button&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;h2&gt;游戏列表&lt;/h2&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;!-- v-bind:key 冒号标识将game.id当成js表达式解析 --&gt;</span><br><span class="line">            &lt;li v-for=&quot;game in games&quot; v-bind:key=&quot;game.id&quot;&gt;&#123;&#123;game.name&#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;button @click=&quot;changeFirstGame&quot;&gt;修改第一个游戏的名称&lt;/button&gt;</span><br><span class="line">            </span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; &gt;</span><br><span class="line">   export default&#123;</span><br><span class="line">        name:&quot;Person123&quot;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup &gt;</span><br><span class="line">    import &#123; ref &#125; from &#x27;vue&#x27;;</span><br><span class="line">    let username=ref(&quot;雷军&quot;) // ref 定义基本数据类型响应式数据</span><br><span class="line">    let car=ref(&#123;brand:&#x27;小米&#x27;,price:80&#125;); //ref 定义对象类型响应式数据</span><br><span class="line">    let games=ref([</span><br><span class="line">        &#123;id:1,name:&#x27;JAVA&#x27;&#125;,</span><br><span class="line">        &#123;id:2,name:&#x27;PYTHON&#x27;&#125;,</span><br><span class="line">        &#123;id:3,name:&#x27;GO&#x27;&#125;,</span><br><span class="line">    ])</span><br><span class="line"></span><br><span class="line">    console.log(username.value) //雷军  ref定义的只能通过.value访问</span><br><span class="line"></span><br><span class="line">    function changePrice()&#123;</span><br><span class="line">        car.value.price-=30</span><br><span class="line">    &#125;</span><br><span class="line">    function changeFirstGame()&#123;</span><br><span class="line">        games.value[0].name=&quot;VUE&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>ref底层也是依赖reactive</p>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250318152057798.png" alt="image-20250318152057798">
<figcaption aria-hidden="true">image-20250318152057798</figcaption>
</figure>
<h2 id="reactive只能声明对象类型的响应式数据">reactive只能声明对象类型的响应式数据</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    .person&#123;</span><br><span class="line">        background-color: #ddd;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;h2&gt;一辆&#123;&#123;car.brand&#125;&#125;车，价值&#123;&#123;car.price&#125;&#125;万&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;changePrice&quot;&gt;改价格&lt;/button&gt;</span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;h2&gt;游戏列表&lt;/h2&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;!-- v-bind:key 冒号标识将game.id当成js表达式解析 --&gt;</span><br><span class="line">            &lt;li v-for=&quot;game in games&quot; v-bind:key=&quot;game.id&quot;&gt;&#123;&#123;game.name&#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;button @click=&quot;changeFirstGame&quot;&gt;修改第一个游戏的名称&lt;/button&gt;</span><br><span class="line">            </span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; &gt;</span><br><span class="line">   export default&#123;</span><br><span class="line">        name:&quot;Person123&quot;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup &gt;</span><br><span class="line">    //reactive只能声明对象类型的响应式数据</span><br><span class="line">    import &#123; reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line">    let car=reactive(&#123;brand:&#x27;小米&#x27;,price:80&#125;);</span><br><span class="line">    let games=reactive([</span><br><span class="line">        &#123;id:1,name:&#x27;JAVA&#x27;&#125;,</span><br><span class="line">        &#123;id:2,name:&#x27;PYTHON&#x27;&#125;,</span><br><span class="line">        &#123;id:3,name:&#x27;GO&#x27;&#125;,</span><br><span class="line">    ])</span><br><span class="line">    function changePrice()&#123;</span><br><span class="line">        car.price-=30</span><br><span class="line">    &#125;</span><br><span class="line">    function changeFirstGame()&#123;</span><br><span class="line">        games[0].name=&quot;VUE&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.person</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>一辆&#123;&#123;car.brand&#125;&#125;车，价值&#123;&#123;car.price&#125;&#125;万<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changePrice&quot;</span>&gt;</span>改价格<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>游戏列表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- v-bind:key 冒号标识将game.id当成js表达式解析 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;game in games&quot;</span> <span class="attr">v-bind:key</span>=<span class="string">&quot;game.id&quot;</span>&gt;</span>&#123;&#123;game.name&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeFirstGame&quot;</span>&gt;</span>修改第一个游戏的名称<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;changeCar&quot;</span>&gt;</span>点击重新分配汽车对象<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> &gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>:<span class="string">&quot;Person123&quot;</span></span></span><br><span class="line"><span class="language-javascript">   &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">lang</span>=<span class="string">&quot;ts&quot;</span> <span class="attr">setup</span> &gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//reactive只能声明对象类型的响应式数据</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> car=<span class="title function_">reactive</span>(&#123;<span class="attr">brand</span>:<span class="string">&#x27;小米&#x27;</span>,<span class="attr">price</span>:<span class="number">80</span>&#125;);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> games=<span class="title function_">reactive</span>([</span></span><br><span class="line"><span class="language-javascript">        &#123;<span class="attr">id</span>:<span class="number">1</span>,<span class="attr">name</span>:<span class="string">&#x27;JAVA&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123;<span class="attr">id</span>:<span class="number">2</span>,<span class="attr">name</span>:<span class="string">&#x27;PYTHON&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">        &#123;<span class="attr">id</span>:<span class="number">3</span>,<span class="attr">name</span>:<span class="string">&#x27;GO&#x27;</span>&#125;,</span></span><br><span class="line"><span class="language-javascript">    ])</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changePrice</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        car.<span class="property">price</span>-=<span class="number">30</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changeFirstGame</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        games[<span class="number">0</span>].<span class="property">name</span>=<span class="string">&quot;VUE&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// reactive定义的对象如果重新分配一个新对象会失去响应式，可以用`Object.assign`去整体替换</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">changeCar</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// car=&#123;brand:&#x27;雅迪&#x27;,price:1&#125; // 如果是reactive定义的对象类型会丢失响应式，而ref定义的就可以这样使用</span></span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">Object</span>.<span class="title function_">assign</span>(car,&#123;<span class="attr">brand</span>:<span class="string">&#x27;雅迪&#x27;</span>,<span class="attr">price</span>:<span class="number">1</span>&#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="torefstoref">toRefs()、toRef()</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    .person&#123;</span><br><span class="line">        background-color: #ddd;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;h2&gt;一辆&#123;&#123;car.brand&#125;&#125;车，价值&#123;&#123;car.price&#125;&#125;万&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;changePrice&quot;&gt;改价格&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">        &lt;br&gt;</span><br><span class="line">        &lt;!-- &lt;button @click=&quot;changeCar&quot;&gt;点击重新分配汽车对象&lt;/button&gt; --&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; &gt;</span><br><span class="line">   export default&#123;</span><br><span class="line">        name:&quot;Person123&quot;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup &gt;</span><br><span class="line">    import &#123; reactive, toRef, toRefs &#125; from &#x27;vue&#x27;;</span><br><span class="line">    let car=reactive(&#123;brand:&#x27;小米&#x27;,price:80&#125;);</span><br><span class="line"></span><br><span class="line">    let &#123;brand,price&#125;=toRefs(car) // toRefs：将car的kv全部解构到变量对应kv，变量也具有响应式</span><br><span class="line">    let mony = toRef(car,&#x27;price&#x27;) // toRef：将car的price解构，变量也具有响应式</span><br><span class="line">    function changePrice()&#123;</span><br><span class="line">        brand.value=&quot;鬼火&quot;</span><br><span class="line">        car.price-=30</span><br><span class="line">        console.log(car.price) //50</span><br><span class="line">        console.log(mony.value) //50</span><br><span class="line">        console.log(car.price===mony.value) // true</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="ref和reactive的区别">ref和reactive的区别</h2>
<ul>
<li>ref定义基本数据类型、对象类型数据。reactive定义对象类型数据</li>
<li>ref创建的变量必须<code>.value</code>。reactive重新分配一个新对象会失去响应式，可以用<code>Object.assign</code>去整体替换</li>
<li>定义层级比较深的响应式对象推荐用<code>reactive</code></li>
<li>ref底层也是依赖reactive</li>
</ul>
<ol type="1">
<li><strong><code>reactive</code></strong>
<ul>
<li><strong>用途</strong>：用于创建一个响应式的对象。</li>
<li><strong>特性</strong>：只能用于对象（包括数组），不能用于基本类型（如字符串、数字、布尔值等）。</li>
<li><strong>响应式原理</strong>：通过 <code>Proxy</code>
对象实现深度响应式。</li>
</ul></li>
<li><strong><code>ref</code></strong>
<ul>
<li><strong>用途</strong>：用于创建一个响应式的引用对象，可以包含任何类型的值，包括基本类型。</li>
<li><strong>特性</strong>：对于对象，<code>ref</code>
会自动将其内部值转换为 <code>reactive</code> 对象。</li>
<li><strong>响应式原理</strong>：通过 <code>Proxy</code>
对象实现响应式，对于基本类型，通过 <code>get</code> 和 <code>set</code>
拦截器实现响应式。</li>
</ul></li>
</ol>
<h4 id="重新分配新对象时的行为">重新分配新对象时的行为</h4>
<ol type="1">
<li><strong><code>reactive</code> 对象</strong>
<ul>
<li><strong>直接重新赋值</strong>：如果直接将 <code>reactive</code>
对象重新赋值为一个新的对象，新的对象不会自动成为响应式对象。</li>
<li><strong>解决方案</strong>：需要使用 <code>reactive</code>
包装新的对象，或者直接修改现有对象的属性。</li>
</ul></li>
<li><strong><code>ref</code> 对象</strong>
<ul>
<li><strong>直接重新赋值</strong>：如果将 <code>ref</code> 对象的
<code>.value</code>
属性重新赋值为一个新的对象，新的对象会自动成为响应式对象。</li>
<li><strong>解决方案</strong>：可以直接重新赋值 <code>.value</code>
属性，或者使用 <code>reactive</code> 包装新的对象。</li>
</ul></li>
</ol>
<h2 id="计算属性computed">计算属性computed()</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    .person&#123;</span><br><span class="line">        background-color: #ddd;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        输入姓：&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt;&lt;br&gt;</span><br><span class="line">        输入名：&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt;&lt;br&gt;</span><br><span class="line">        &lt;span&gt;普通方法调全名:&#123;&#123;fullName()&#125;&#125;&lt;/span&gt;&lt;br&gt;</span><br><span class="line">        &lt;span&gt;普通方法调全名:&#123;&#123;fullName()&#125;&#125;&lt;/span&gt;&lt;br&gt;</span><br><span class="line">        &lt;span&gt;计算属性调全名:&#123;&#123;fullNameComputed&#125;&#125;&lt;/span&gt;&lt;br&gt;</span><br><span class="line">        &lt;span&gt;计算属性调全名:&#123;&#123;fullNameComputed&#125;&#125;&lt;/span&gt;&lt;br&gt;</span><br><span class="line">        &lt;button @click=&quot;updateFullname&quot;&gt;计算属性修改全名:&#123;&#123;fullNameComputed&#125;&#125;&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; &gt;</span><br><span class="line">   export default&#123;</span><br><span class="line">        name:&quot;Person123&quot;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup &gt;</span><br><span class="line">    import &#123; ref, computed &#125; from &#x27;vue&#x27;; //引入计算属性computed</span><br><span class="line">    let firstName = ref(&quot;luo&quot;)</span><br><span class="line">    let lastName = ref(&quot;tao&quot;)</span><br><span class="line">    function fullName()&#123;</span><br><span class="line">        console.log(1); // 调用几次就打印几次，因为没有缓存</span><br><span class="line">        return firstName.value.slice(0,1).toUpperCase() + firstName.value.slice(1) + lastName.value.slice(0,1).toUpperCase() + lastName.value.slice(1)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">    // 这么定义的fullNameComputed是只读的，可以通过set修改</span><br><span class="line">    let fullNameComputed = computed(()=&gt;&#123; </span><br><span class="line">        // 相当于java的override</span><br><span class="line">        console.log(&quot;computed&quot;); // 调用一次，computed会缓存</span><br><span class="line">    &#125;)*/</span><br><span class="line"></span><br><span class="line">    // 这么定义fullNameComputed可以通过set修改</span><br><span class="line">    let fullNameComputed = computed(&#123; </span><br><span class="line">        // 传递对象，相当于 java的setter</span><br><span class="line">        get()&#123;</span><br><span class="line">            return firstName.value.slice(0,1).toUpperCase() + firstName.value.slice(1) + lastName.value.slice(0,1).toUpperCase() + lastName.value.slice(1)</span><br><span class="line">        </span><br><span class="line">        &#125;,</span><br><span class="line">        set(val)&#123;</span><br><span class="line">            const [firststr,laststr] = val.split(&quot;-&quot;)</span><br><span class="line">            firstName.value=firststr</span><br><span class="line">            lastName.value=laststr</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    function updateFullname()&#123;</span><br><span class="line">        fullNameComputed.value=&quot;shuai-ge&quot; // 传给set进行修改</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="watch-监视ref定义的基本类型数据">【watch】-监视【ref】定义的【基本类型】数据</h2>
<ul>
<li>直接写数据名,监视的是value值的改变</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    .person&#123;</span><br><span class="line">        background-color: #ddd;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;button @click=&quot;sum&quot;&gt;&#123;&#123;count&#125;&#125;&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; &gt;</span><br><span class="line">   export default&#123;</span><br><span class="line">        name:&quot;Person123&quot;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup &gt;</span><br><span class="line">    import &#123; ref, watch&#125; from &#x27;vue&#x27;;</span><br><span class="line">    let count =ref(0)</span><br><span class="line">    function sum()&#123;</span><br><span class="line">        count.value +=1;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    // watch 监视【ref】定义的【基本类型】数据</span><br><span class="line">    const stopWach= watch(count,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">        console.log(&quot;count变化了&quot;,newValue,oldValue);</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        if (newValue&gt;=5)&#123;</span><br><span class="line">            stopWach();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="watch-监视ref定义的对象类型数据">【watch】-监视【ref】定义的【对象类型】数据</h2>
<ul>
<li>若修改的是ref定义的对象的属性，newValue和oldValue都是新值，因为它们是同一个对象,地址值不变。</li>
<li>若修改整个ref定义的对象，newValue是新值，oldValue是旧值，因为不是同一个对象。监视的是地址值，若想监视对象内部属性的变化，需要开启深度监视。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">    .person&#123;</span><br><span class="line">        background-color: #ddd;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;h1&gt;watch-监视【ref】定义的【对象类型】数据&lt;/h1&gt;</span><br><span class="line">        &lt;h2&gt;姓名：&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;&lt;br&gt;</span><br><span class="line">        &lt;h2&gt;年龄：&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;&lt;br&gt;</span><br><span class="line">        &lt;div class=&quot;btn&quot;&gt;</span><br><span class="line">            &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">            &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">            &lt;button @click=&quot;changePerson&quot;&gt;修改整个人&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; &gt;</span><br><span class="line">   export default&#123;</span><br><span class="line">        name:&quot;Person123&quot;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup &gt;</span><br><span class="line">    import &#123; ref, watch&#125; from &#x27;vue&#x27;;</span><br><span class="line">    let person=ref(&#123;</span><br><span class="line">        name:&quot;luotao&quot;,</span><br><span class="line">        age:20</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    function changeName()&#123;</span><br><span class="line">        person.value.name=&quot;neko&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    function changeAge()&#123;</span><br><span class="line">        person.value.age= 18</span><br><span class="line">    &#125;</span><br><span class="line">    function changePerson()&#123;</span><br><span class="line">        person.value=&#123;name:&quot;张三&quot;,age:25&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // watch 监视【ref】定义的【对象类型】数据</span><br><span class="line">    /*</span><br><span class="line">    * 若修改的是ref定义的对象的属性，newValue和oldValue都是新值，因为它们是同一个对象,地址值不变。</span><br><span class="line">    * 若修改整个ref定义的对象，newValue是新值，oldValue是旧值，因为不是同一个对象。监视的是地址值，若想监视对象内部属性的变化，需要开启深度监视。</span><br><span class="line">    */</span><br><span class="line">    const stopWach= watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">        console.log(&quot;person变化了&quot;,newValue,oldValue);</span><br><span class="line">        console.log(newValue===oldValue); </span><br><span class="line"></span><br><span class="line">    &#125;,&#123;deep:true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="watch-监视reactive定义的对象类型数据">【watch】-监视【reactive】定义的【对象类型】数据</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;h1&gt;监视【reactive】定义的【对象类型】数据&lt;/h1&gt;</span><br><span class="line">        &lt;h2&gt;姓名：&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;&lt;br&gt;</span><br><span class="line">        &lt;h2&gt;年龄：&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;&lt;br&gt;</span><br><span class="line">        &lt;div class=&quot;btn&quot;&gt;</span><br><span class="line">            &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">            &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">            &lt;button @click=&quot;changePerson&quot;&gt;修改整个人&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; reactive,watch &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">let person=reactive(&#123;</span><br><span class="line">    name:&quot;luotao&quot;,</span><br><span class="line">    age:20</span><br><span class="line">&#125;)</span><br><span class="line">function changeName()&#123;</span><br><span class="line">    person.name=&quot;neko&quot;</span><br><span class="line">&#125;</span><br><span class="line">function changeAge()&#123;</span><br><span class="line">    person.age=18</span><br><span class="line">&#125;</span><br><span class="line">function changePerson()&#123;</span><br><span class="line">    person=Object.assign(person,&#123;name:&quot;张三&quot;,age:25&#125;)</span><br><span class="line">&#125;</span><br><span class="line">// 监视【reactive】定义的【对象类型】数据，默认隐式的创建了深度监视。这里person地址值没有变，nnewValue和oldvalue是同一个对象</span><br><span class="line">watch(person,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&quot;person变化了：&quot;,newValue,oldValue);</span><br><span class="line">    console.log(newValue===oldValue); // true  操作的是同一个对象</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.person&#123;</span><br><span class="line">    background-color: greenyellow;</span><br><span class="line">    box-shadow: 0,0 10px;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-wrap: wrap;</span><br><span class="line">    justify-content: center;</span><br><span class="line">    align-items: center;</span><br><span class="line">    height: 100px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="watch-监视ref或reactive定义的对象类型中某个属性">【watch】-监视ref或reactive定义的【对象类型】中某个属性</h2>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250319133253221.png" alt="image-20250319133253221">
<figcaption aria-hidden="true">image-20250319133253221</figcaption>
</figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;h2&gt;姓名：&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;年龄：&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;汽车&#123;&#123;person.car.c1&#125;&#125;、&#123;&#123;person.car.c2&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;changeC1&quot;&gt;修改第一台车&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;changeC2&quot;&gt;修改第二台车&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;changeCar&quot;&gt;修改整个车&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;person&quot;&gt;</span><br><span class="line">import &#123; reactive, watch &#125; from &#x27;vue&#x27;;</span><br><span class="line">    let person=reactive(&#123;</span><br><span class="line">        name:&quot;luotao&quot;,</span><br><span class="line">        age:18,</span><br><span class="line">        car:&#123;</span><br><span class="line">            c1:&quot;su7&quot;,</span><br><span class="line">            c2:&quot;雅迪&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    function changeName()&#123;</span><br><span class="line">        person.name +=&quot;~&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    function changeAge()&#123;</span><br><span class="line">        person.age+=1</span><br><span class="line">    &#125;</span><br><span class="line">    function changeC1()&#123;</span><br><span class="line">        person.car.c1=&quot;c1&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    function changeC2()&#123;</span><br><span class="line">        person.car.c2=&quot;c2&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    function changeCar()&#123;</span><br><span class="line">        person.car=&#123;</span><br><span class="line">            c1:&quot;c3&quot;,</span><br><span class="line">            c2:&quot;c4&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 监视ref或reactive定义的【对象类型】中某个属性：</span><br><span class="line">    // 需要写成函数式（getter函数）</span><br><span class="line">    /*watch(()=&gt;&#123;return person.name&#125;,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">        console.log(&quot;person.name变化了&quot;,newValue,oldValue);</span><br><span class="line">    &#125;)*/</span><br><span class="line"></span><br><span class="line">    // 监视ref或reactive定义的【对象类型】中某个属性,且该属性是对象类型的(监视的是地址值)：</span><br><span class="line">    // 推荐写函数式，若要关注该属性的细枝末节，可以直接开启深度监视</span><br><span class="line">    /*watch(()=&gt;&#123;</span><br><span class="line">        return person.car</span><br><span class="line">    &#125;,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">        console.log(&quot;person.car变化了&quot;,newValue,oldValue)</span><br><span class="line">    &#125;,&#123;deep:true&#125;)*/</span><br><span class="line"></span><br><span class="line">    // 以上两种情况的数组写法</span><br><span class="line">    watch([()=&gt;&#123;</span><br><span class="line">        return person.name</span><br><span class="line">    &#125;,()=&gt;&#123;</span><br><span class="line">        return person.car</span><br><span class="line">    &#125;],(newValue,oldValue)=&gt;&#123;</span><br><span class="line">        console.log(&quot;person.car变化了&quot;,newValue,oldValue)</span><br><span class="line">    &#125;,&#123;deep:true&#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .person&#123;</span><br><span class="line">        background-color: greenyellow;</span><br><span class="line">        box-shadow: 0,0 10px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: wrap;</span><br><span class="line">        align-items: center;</span><br><span class="line">        flex-direction: column;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="watcheffect">【watchEffect】</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;h2&gt;水温：&#123;&#123;temperature&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;水位：&#123;&#123;hight&#125;&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;changeTemperature&quot;&gt;水温+10&lt;/button&gt;</span><br><span class="line">        &lt;button @click=&quot;changeHight&quot;&gt;水位+10&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;person&quot;&gt;</span><br><span class="line">import &#123; ref, watch, watchEffect &#125; from &#x27;vue&#x27;;</span><br><span class="line">    let temperature=ref(10)</span><br><span class="line">    let hight=ref(10)</span><br><span class="line">    function changeTemperature()&#123;</span><br><span class="line">        temperature.value +=10</span><br><span class="line">    &#125;</span><br><span class="line">    function changeHight()&#123;</span><br><span class="line">        hight.value+=10</span><br><span class="line">    &#125;</span><br><span class="line">    // watch要明确出监视的数据</span><br><span class="line">    /*</span><br><span class="line">    watch([temperature,hight],(value,oldValue)=&gt;&#123;</span><br><span class="line">        let [temperature,hight]=value</span><br><span class="line">        if (temperature &gt;=60 || hight &gt;=60)&#123;</span><br><span class="line">            console.log(&quot;发送请求&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">              </span><br><span class="line">    &#125;)*/</span><br><span class="line"></span><br><span class="line">    // watchEffect：行数用到哪些属性就监视哪些属性</span><br><span class="line">    watchEffect(()=&gt;&#123;</span><br><span class="line">        console.log(&quot;一上来就执行&quot;);</span><br><span class="line">        </span><br><span class="line">        if (temperature.value &gt;=60 || hight.value &gt;=60)&#123;</span><br><span class="line">            console.log(&quot;发送请求&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .person&#123;</span><br><span class="line">        background-color: greenyellow;</span><br><span class="line">        box-shadow: 0,0 10px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: wrap;</span><br><span class="line">        align-items: center;</span><br><span class="line">        flex-direction: column;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="标签的ref属性">标签的【ref】属性</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;!-- 【标签的ref属性用于注册模板引用】用在DOM标签上获取的是DOM节点，用在组件标签上，获取的是主键实例对象 --&gt;</span><br><span class="line">        &lt;h2 ref=&quot;temp&quot;&gt;你好&lt;/h2&gt;</span><br><span class="line">        &lt;button @click=&quot;show&quot;&gt;展示ref标记的内容&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;person&quot;&gt;</span><br><span class="line">import &#123; ref ,defineExpose&#125; from &#x27;vue&#x27;;</span><br><span class="line">    let temp=ref(); // 创建一个temp，用于存储ref标记的内容</span><br><span class="line">    function show()&#123;</span><br><span class="line">        console.log(temp.value); // &lt;h2&gt;水温：10&lt;/h2&gt;</span><br><span class="line">        </span><br><span class="line">    &#125;   </span><br><span class="line">    defineExpose(&#123;temp&#125;) // 导出</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .person&#123;</span><br><span class="line">        background-color: greenyellow;</span><br><span class="line">        box-shadow: 0,0 10px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: wrap;</span><br><span class="line">        align-items: center;</span><br><span class="line">        flex-direction: column;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="ts中的接口_泛型_自定义类型">TS中的接口_泛型_自定义类型</h2>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个接口来约束person对象的具体属性</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">PersonInter</span>&#123;</span><br><span class="line">    <span class="attr">id</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个自定义类型</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">type</span> <span class="title class_">Persons</span>=<span class="title class_">PersonInter</span>[]</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script  lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">    import &#123;type PersonInter,type Persons&#125; from &#x27;@/types&#x27;</span><br><span class="line">    import &#123; reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line">    // let personList:Persons=reactive([</span><br><span class="line">    //     &#123;id:&#x27;1&#x27;,name:&#x27;luotao&#x27;,age:18&#125;,</span><br><span class="line">    //     &#123;id:&#x27;2&#x27;,name:&#x27;neko&#x27;,age:20&#125;</span><br><span class="line">    // ])</span><br><span class="line">    // 优雅的写法</span><br><span class="line">    let personList=reactive&lt;Persons&gt;([</span><br><span class="line">        &#123;id:&#x27;1&#x27;,name:&#x27;luotao&#x27;,age:18&#125;,</span><br><span class="line">        &#123;id:&#x27;2&#x27;,name:&#x27;neko&#x27;,age:20&#125;</span><br><span class="line">    ])</span><br><span class="line">    console.log(personList[0].name);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="props的使用">【props】的使用</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import Person from &#x27;./components/Person.vue&#x27;;</span><br><span class="line">import &#123; reactive &#125; from &#x27;vue&#x27;;</span><br><span class="line">import &#123;type PersonInter,type Persons&#125; from &#x27;@/types&#x27;</span><br><span class="line">  let personList= reactive&lt;Persons&gt;(</span><br><span class="line">    [</span><br><span class="line">      &#123;id:&#x27;1&#x27;,name:&#x27;luotao&#x27;,age:18&#125;,</span><br><span class="line">      &#123;id:&#x27;2&#x27;,name:&#x27;neko&#x27;,age:20&#125;,</span><br><span class="line">    ]</span><br><span class="line">  )</span><br><span class="line">  console.log(personList)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 传给Person组件 --&gt;</span><br><span class="line">  &lt;Person :list=&quot;personList&quot;&gt;&lt;/Person&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">    import &#123; type Persons &#125; from &#x27;@/types&#x27;;</span><br><span class="line">    import &#123; defineProps ,withDefaults&#125; from &#x27;vue&#x27;;</span><br><span class="line">    // let hello= defineProps([&quot;list&quot;]) // 1.只接受list</span><br><span class="line"></span><br><span class="line">    // let hello = defineProps&lt;&#123;list:Persons&#125;&gt;() // 2.接受list,限制Person类型</span><br><span class="line"></span><br><span class="line">    // 3.接受list,限制Person类型,?限制必要性，withDefaults指定默认值</span><br><span class="line">    withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;</span><br><span class="line">        list:()=&gt;&#123;</span><br><span class="line">            return [&#123;id:&#x27;0&#x27;,name:&#x27;defaultName&#x27;,age:18&#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">     &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;item in list &quot; :key=&quot;item.id&quot;&gt;&#123;&#123;item.name&#125;&#125;--&#123;&#123; item.age &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">        .person&#123;</span><br><span class="line">        background-color: greenyellow;</span><br><span class="line">        box-shadow: 0,0 10px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: wrap;</span><br><span class="line">        align-items: center;</span><br><span class="line">        flex-direction: column;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="vue3生命周期">vue3生命周期</h2>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250104151543030.png" alt="image-20250104151543030">
<figcaption aria-hidden="true">image-20250104151543030</figcaption>
</figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;h1&gt;生命周期&lt;/h1&gt;</span><br><span class="line">        &lt;p&gt;&lt;button @click=&quot;changeCount&quot;&gt;点击修改count值-- &#123;&#123; count &#125;&#125;&lt;/button&gt;&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&lt;button @click=&quot;destroy&quot;&gt;点击销毁&lt;/button&gt;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">        import &#123; getCurrentInstance,</span><br><span class="line">            reactive, </span><br><span class="line">            toRefs,</span><br><span class="line">            onBeforeMount,</span><br><span class="line">            onMounted,</span><br><span class="line">            onBeforeUpdate,</span><br><span class="line">            onUpdated,</span><br><span class="line">            onBeforeUnmount,</span><br><span class="line">            onUnmounted</span><br><span class="line"></span><br><span class="line">         &#125; from &#x27;vue&#x27;</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        console.log(&quot;开始创建组件--setup&quot;)</span><br><span class="line">        const instance = getCurrentInstance(); //获取当前组件实例</span><br><span class="line">        console.log(&quot;当前组件实例--instance&quot; , instance);</span><br><span class="line">        const state = reactive(&#123; //定义响应式数据对象</span><br><span class="line">            count: 0,</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        function changeCount() &#123; //触发组件更新</span><br><span class="line">            state.count++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        function destroy() &#123; //触发销毁组件</span><br><span class="line">            instance.appContext.app.unmount();</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        onBeforeMount(() =&gt; &#123; </span><br><span class="line">            console.log(&quot;组件挂载前--onBeforeMount&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line">        onMounted(() =&gt; &#123; </span><br><span class="line">            console.log(&quot;组件挂载后--onMounted&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line">        onBeforeUpdate(() =&gt; &#123; </span><br><span class="line">            console.log(&quot;组件更新前--onBeforeUpdate&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line">        onUpdated(() =&gt; &#123; </span><br><span class="line">            console.log(&quot;组件更新后--onUpdated&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line">        onBeforeUnmount(() =&gt; &#123; </span><br><span class="line">            console.log(&quot;组件卸载前--onBeforeUnmount&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line">        onUnmounted(() =&gt; &#123; </span><br><span class="line">            console.log(&quot;组件卸载后--onUnmounted&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        const &#123;count&#125;=&#123;   ...toRefs(state)&#125;// 将响应式对象转为普通对象(每一个属性都是响应式)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<h2 id="自定义hooks">自定义Hooks</h2>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onBeforeMount, reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> dogList = <span class="title function_">reactive</span>([</span><br><span class="line">        <span class="string">&#x27;https://images.dog.ceo/breeds/pembroke/n02113023_4373.jpg&#x27;</span></span><br><span class="line">    ])</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getDog</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> result = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://dog.ceo/api/breed/pembroke/images/random&#x27;</span>)</span><br><span class="line">            dogList.<span class="title function_">push</span>(result.<span class="property">data</span>.<span class="property">message</span>)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(error)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">onBeforeMount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="title function_">getDog</span>() </span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;dogList,getDog&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">     &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">        &lt;img v-for=&quot; (dog,index) in dogList&quot; :key=&quot;index&quot; :src=&quot;dog&quot; alt=&quot;&quot;&gt;</span><br><span class="line">        &lt;button @click=&quot;getDog&quot;&gt;再来一只&lt;/button&gt;</span><br><span class="line">     &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import useDog from &#x27;@/hooks/useDog&#x27;;</span><br><span class="line">const &#123;dogList,getDog&#125;=useDog()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">    .person&#123;</span><br><span class="line">        background-color: greenyellow;</span><br><span class="line">        box-shadow: 0,0 10px;</span><br><span class="line">        display: flex;</span><br><span class="line">        flex-wrap: nowrap;</span><br><span class="line">        align-items: center;</span><br><span class="line">        flex-direction: column;</span><br><span class="line">    &#125;</span><br><span class="line">    img&#123;</span><br><span class="line">        width: 100px;</span><br><span class="line">        margin-bottom: 1px;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="路由的query参数">路由的query参数</h2>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320021455569.png" alt="image-20250320021455569">
<figcaption aria-hidden="true">image-20250320021455569</figcaption>
</figure>
<h2 id="路由的param参数">路由的param参数</h2>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320135029082.png" alt="image-20250320135029082">
<figcaption aria-hidden="true">image-20250320135029082</figcaption>
</figure>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320135626427.png" alt="image-20250320135626427">
<figcaption aria-hidden="true">image-20250320135626427</figcaption>
</figure>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320135722595.png" alt="image-20250320135722595">
<figcaption aria-hidden="true">image-20250320135722595</figcaption>
</figure>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320140337010.png" alt="image-20250320140337010">
<figcaption aria-hidden="true">image-20250320140337010</figcaption>
</figure>
<h3 id="路由的props配置">路由的props配置</h3>
<ul>
<li>props的对象写法</li>
<li>props的布尔值写法</li>
<li>props的函数写法</li>
</ul>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320141106962.png" alt="image-20250320141106962">
<figcaption aria-hidden="true">image-20250320141106962</figcaption>
</figure>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320141200490.png" alt="image-20250320141200490">
<figcaption aria-hidden="true">image-20250320141200490</figcaption>
</figure>
<h2 id="replace属性">replace属性</h2>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320141836425.png" alt="image-20250320141836425">
<figcaption aria-hidden="true">image-20250320141836425</figcaption>
</figure>
<h2 id="编程式路由导航">编程式路由导航</h2>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320142903447.png" alt="image-20250320142903447">
<figcaption aria-hidden="true">image-20250320142903447</figcaption>
</figure>
<h2 id="使用pinia修改数据的三种方式">使用pinia修改数据的三种方式</h2>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320152718722.png" alt="image-20250320152718722">
<figcaption aria-hidden="true">image-20250320152718722</figcaption>
</figure>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320152636282.png" alt="image-20250320152636282">
<figcaption aria-hidden="true">image-20250320152636282</figcaption>
</figure>
<h2 id="storetorefs">storeToRefs</h2>
<h2 id="subscribe的使用">$subscribe的使用</h2>
<h2 id="组件通信方式_props">组件通信方式_props</h2>
<p>props通常用在父组件与子组件。</p>
<p>若父传子，属性值是非函数。</p>
<p>若子传父，属性值是函数。</p>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320161423768.png" alt="image-20250320161423768">
<figcaption aria-hidden="true">image-20250320161423768</figcaption>
</figure>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320161423768.png" alt="image-20250320161423768">
<figcaption aria-hidden="true">image-20250320161423768</figcaption>
</figure>
<h2 id="组件通信方式_自定义事件">组件通信方式_自定义事件</h2>
<figure>
<img src="/2025/03/18/Vue3%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/image-20250320164314641.png" alt="image-20250320164314641">
<figcaption aria-hidden="true">image-20250320164314641</figcaption>
</figure>
<h2 id="组件通信方式_mitt">组件通信方式_mitt</h2>
<ul>
<li><p><code>npm i mitt</code></p></li>
<li><p>创建utils包下的emitter.ts</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入mitt</span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用mitt得到emitter，emitter能：绑定事件、触发事件</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">/* // 绑定事件</span></span><br><span class="line"><span class="comment">emitter.on(&#x27;test1&#x27;,()=&gt;&#123;</span></span><br><span class="line"><span class="comment">  console.log(&#x27;test1被调用了&#x27;)</span></span><br><span class="line"><span class="comment">&#125;)</span></span><br><span class="line"><span class="comment">emitter.on(&#x27;test2&#x27;,()=&gt;&#123;</span></span><br><span class="line"><span class="comment">  console.log(&#x27;test2被调用了&#x27;)</span></span><br><span class="line"><span class="comment">&#125;)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// 触发事件</span></span><br><span class="line"><span class="comment">setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">  emitter.emit(&#x27;test1&#x27;)</span></span><br><span class="line"><span class="comment">  emitter.emit(&#x27;test2&#x27;)</span></span><br><span class="line"><span class="comment">&#125;, 1000);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">  // emitter.off(&#x27;test1&#x27;)</span></span><br><span class="line"><span class="comment">  // emitter.off(&#x27;test2&#x27;)</span></span><br><span class="line"><span class="comment">  emitter.all.clear()</span></span><br><span class="line"><span class="comment">&#125;, 3000); */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 暴露emitter</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter</span><br></pre></td></tr></table></figure></li>
<li><p>main.ts中import</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&#x27;./utils/emitter&#x27;</span>; <span class="comment">//引入emitter</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>子组件1给子组件2传递toy</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;child1&quot;&gt;</span><br><span class="line">      &lt;h3&gt;子组件1&lt;/h3&gt;</span><br><span class="line">      &lt;h4&gt;玩具：&#123;&#123;toy&#125;&#125;&lt;/h4&gt;</span><br><span class="line">      &lt;!-- 用emitter.emit触发组件2声明的send-toy事件，并传递我自己的toy --&gt;</span><br><span class="line">      &lt;button @click=&quot;emitter.emit(&#x27;send-toy&#x27;,toy)&quot;&gt;给组件2toy&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script setup lang=&quot;ts&quot; name=&quot;Child1&quot;&gt;</span><br><span class="line">    import emitter from &#x27;@/utils/emitter&#x27;;</span><br><span class="line">    import &#123; ref &#125; from &#x27;vue&#x27;;</span><br><span class="line">    let toy = ref(&#x27;奥特曼&#x27;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;style scoped&gt;</span><br><span class="line">      .child1&#123;</span><br><span class="line">          margin-top: 50px;</span><br><span class="line">          background-color: skyblue;</span><br><span class="line">          padding: 10px;</span><br><span class="line">          box-shadow: 0 0 10px black;</span><br><span class="line">          border-radius: 10px;</span><br><span class="line">      &#125;</span><br><span class="line">      .child1 button&#123;</span><br><span class="line">          margin-right: 10px;</span><br><span class="line">      &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;child2&quot;&gt;</span><br><span class="line">      &lt;h3&gt;子组件2&lt;/h3&gt;</span><br><span class="line">      &lt;h4&gt;电脑:&#123;&#123;computer&#125;&#125;&lt;/h4&gt;</span><br><span class="line">      &lt;h4&gt;组件1给我的toy是：&#123;&#123;toy&#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;script setup lang=&quot;ts&quot; name=&quot;Child2&quot;&gt;</span><br><span class="line">  import emitter from &#x27;@/utils/emitter&#x27;</span><br><span class="line">import &#123; onUnmounted &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">  </span><br><span class="line">      let computer = ref(&#x27;小米&#x27;)</span><br><span class="line">      let toy = ref(&#x27;&#x27;)</span><br><span class="line">      // 给emitter绑定send-toy事件</span><br><span class="line">      emitter.on(&#x27;send-toy&#x27;,(value:any)=&gt;&#123;</span><br><span class="line">          toy.value=value</span><br><span class="line">      &#125;)</span><br><span class="line">      // 在组件2卸载时解绑send-toy事件</span><br><span class="line">      onUnmounted(()=&gt;&#123;</span><br><span class="line">        emitter.off(&#x27;send-toy&#x27;)</span><br><span class="line">        console.log(&#x27;send-toy事件卸载了&#x27;);</span><br><span class="line">        </span><br><span class="line">      &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;style scoped&gt;</span><br><span class="line">      .child2&#123;</span><br><span class="line">          margin-top: 50px;</span><br><span class="line">          background-color: orange;</span><br><span class="line">          padding: 10px;</span><br><span class="line">          box-shadow: 0 0 10px black;</span><br><span class="line">          border-radius: 10px;</span><br><span class="line">      &#125;</span><br><span class="line">  &lt;/style&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="vue3核心概念">Vue3核心概念</h2>
<h3 id="响应式系统-1">响应式系统</h3>
<p><strong>技术解释</strong>：Vue3的响应式系统基于ES6的Proxy，能够直接监听对象和数组的变化。</p>
<p><strong>生活案例</strong>：想象一个智能家居系统。当你调整温度设定（数据变化）时，空调会自动响应并调整工作模式（UI更新）。Vue3的响应式系统就像这个智能家居的控制中心，监测所有设定的变化并通知相关设备做出反应。</p>
<h3 id="组件化">组件化</h3>
<p><strong>技术解释</strong>：Vue应用由独立、可复用的组件构建而成，每个组件封装自己的HTML、CSS和JavaScript。</p>
<p><strong>生活案例</strong>：组件就像乐高积木。每个积木（组件）有特定的形状和功能，可以独立存在，也可以与其他积木组合创建复杂结构。一个页面就是由这些不同功能的”积木”组合而成的。</p>
<h2 id="组件通信方式">组件通信方式</h2>
<h3 id="组件通信方式之v-model">组件通信方式之v-model</h3>
<p><strong>技术解释</strong>：Vue3中的v-model是props和emit的语法糖，用于在父子组件间实现双向绑定。</p>
<p><strong>生活案例</strong>：想象父母（父组件）给孩子（子组件）零花钱。v-model就像一个特殊的钱包：父母放钱进去（props传值），孩子花钱后会自动更新钱包余额并通知父母（emit事件）。这样父母始终知道钱包里有多少钱，实现了”双向通信”。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;child-component v-model:money=&quot;pocket&quot; /&gt;</span><br><span class="line">&lt;p&gt;钱包余额: &#123;&#123; pocket &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import ChildComponent from &#x27;./ChildComponent.vue&#x27;</span><br><span class="line">const pocket = ref(100)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!-- 子组件 (ChildComponent.vue) --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">&lt;p&gt;我的零花钱: &#123;&#123; money &#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;button @click=&quot;spendMoney(10)&quot;&gt;花费10元&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const props = defineProps([&#x27;money&#x27;])</span><br><span class="line">const emit = defineEmits([&#x27;update:money&#x27;])</span><br><span class="line">function spendMoney(amount) &#123;</span><br><span class="line">emit(&#x27;update:money&#x27;, props.money - amount)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="组件通信方式之attrs-技术解释attrs包含父组件传递给子组件但未被props接收的所有属性vue3中也包含了事件监听器">组件通信方式之<span class="math inline"><em>a</em><em>t</em><em>t</em><em>r</em><em>s</em> * *<em>技</em><em>术</em><em>解</em><em>释</em> * *：</span>attrs包含父组件传递给子组件但未被props接收的所有属性，Vue3中也包含了事件监听器。</h3>
<p><strong>生活案例</strong>：想象一个快递转运站。当包裹（属性）到达转运站（父组件）时，有些包裹有明确的收件人（props），而其他包裹（<span class="math inline"><em>a</em><em>t</em><em>t</em><em>r</em><em>s</em>）<em>则</em><em>需</em><em>要</em><em>继</em><em>续</em><em>转</em><em>发</em><em>到</em><em>下</em><em>一</em><em>站</em>（<em>子</em><em>组</em><em>件</em><em>或</em><em>孙</em><em>组</em><em>件</em>）。</span>attrs就是这个自动转发系统。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;middle-component </span><br><span class="line">    title=&quot;Hello&quot; </span><br><span class="line">    :description=&quot;desc&quot; </span><br><span class="line">    @click=&quot;handleClick&quot; </span><br><span class="line">  /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import MiddleComponent from &#x27;./MiddleComponent.vue&#x27;</span><br><span class="line"></span><br><span class="line">const desc = ref(&#x27;This is a description&#x27;)</span><br><span class="line">function handleClick() &#123;</span><br><span class="line">  console.log(&#x27;Clicked!&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 中间组件 (MiddleComponent.vue) --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;中间组件&lt;/h2&gt;</span><br><span class="line">    &lt;child-component v-bind=&quot;$attrs&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import ChildComponent from &#x27;./ChildComponent.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件 (ChildComponent.vue) --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;&#123;&#123; description &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;$attrs.onClick&quot;&gt;点击我&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">defineProps([&#x27;title&#x27;, &#x27;description&#x27;])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="组件通信方式之refs与parent">组件通信方式之<span class="math inline"><em>r</em><em>e</em><em>f</em><em>s</em><em>与</em></span>parent</h3>
<p><strong>技术解释</strong>：<span class="math inline"><em>r</em><em>e</em><em>f</em><em>s</em><em>用</em><em>于</em><em>直</em><em>接</em><em>访</em><em>问</em><em>子</em><em>组</em><em>件</em><em>实</em><em>例</em><em>或</em><em>D</em><em>O</em><em>M</em><em>元</em><em>素</em>，<em>而</em></span>parent用于访问父组件实例。</p>
<p><strong>生活案例</strong>：想象一个办公室环境。<span class="math inline"><em>r</em><em>e</em><em>f</em><em>s</em><em>就</em><em>像</em><em>直</em><em>接</em><em>走</em><em>到</em><em>同</em><em>事</em><em>桌</em><em>前</em>（<em>子</em><em>组</em><em>件</em>）<em>请</em><em>求</em><em>帮</em><em>助</em>，<em>而</em></span>parent则像向你的上级（父组件）请求指导。这是直接的点对点通信，不经过正式的沟通渠道。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;child-component ref=&quot;childRef&quot; /&gt;</span><br><span class="line">    &lt;button @click=&quot;callChildMethod&quot;&gt;调用子组件方法&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import ChildComponent from &#x27;./ChildComponent.vue&#x27;</span><br><span class="line"></span><br><span class="line">const childRef = ref(null)</span><br><span class="line"></span><br><span class="line">function callChildMethod() &#123;</span><br><span class="line">  childRef.value.showMessage(&#x27;来自父组件的消息&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 子组件 (ChildComponent.vue) --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;子组件&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;askParent&quot;&gt;向父组件请求数据&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; getCurrentInstance &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const instance = getCurrentInstance()</span><br><span class="line"></span><br><span class="line">function showMessage(msg) &#123;</span><br><span class="line">  alert(msg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function askParent() &#123;</span><br><span class="line">  const parentData = instance.parent.data</span><br><span class="line">  alert(`父组件数据: $&#123;parentData&#125;`)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 暴露方法给父组件调用</span><br><span class="line">defineExpose(&#123;</span><br><span class="line">  showMessage</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="组件通信方式之provide_inject">组件通信方式之provide_inject</h3>
<p><strong>技术解释</strong>：provide/inject允许祖先组件向所有后代组件注入数据，无需通过props逐级传递。</p>
<p><strong>生活案例</strong>：想象一个家族WhatsApp群组。家族长辈（祖先组件）在群里发布重要信息（provide数据），所有家族成员（后代组件）无论层级关系如何，都能直接接收到这些信息（inject数据），而不需要通过中间人传话。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 祖先组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;家族群组&lt;/h1&gt;</span><br><span class="line">    &lt;p&gt;当前主题: &#123;&#123; theme &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;toggleTheme&quot;&gt;切换主题&lt;/button&gt;</span><br><span class="line">    &lt;middle-component /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, provide &#125; from &#x27;vue&#x27;</span><br><span class="line">import MiddleComponent from &#x27;./MiddleComponent.vue&#x27;</span><br><span class="line"></span><br><span class="line">const theme = ref(&#x27;light&#x27;)</span><br><span class="line"></span><br><span class="line">function toggleTheme() &#123;</span><br><span class="line">  theme.value = theme.value === &#x27;light&#x27; ? &#x27;dark&#x27; : &#x27;light&#x27;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 提供主题给所有后代组件</span><br><span class="line">provide(&#x27;theme&#x27;, theme)</span><br><span class="line">provide(&#x27;toggleTheme&#x27;, toggleTheme)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 中间组件 (MiddleComponent.vue) --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;中间组件&lt;/h2&gt;</span><br><span class="line">    &lt;descendant-component /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import DescendantComponent from &#x27;./DescendantComponent.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 后代组件 (DescendantComponent.vue) --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :class=&quot;theme&quot;&gt;</span><br><span class="line">    &lt;h3&gt;后代组件&lt;/h3&gt;</span><br><span class="line">    &lt;p&gt;当前使用的主题: &#123;&#123; theme &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;toggleTheme&quot;&gt;切换主题&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; inject &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 注入祖先组件提供的数据</span><br><span class="line">const theme = inject(&#x27;theme&#x27;)</span><br><span class="line">const toggleTheme = inject(&#x27;toggleTheme&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="插槽系统">插槽系统</h2>
<h3 id="默认插槽">默认插槽</h3>
<p><strong>技术解释</strong>：默认插槽允许父组件将内容传递到子组件的指定位置。</p>
<p><strong>生活案例</strong>：想象一个相框（子组件）。默认插槽就像相框中放照片的空间，你可以在这个空间（slot）放入任何照片（内容），而相框的样式和结构保持不变。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 (Frame.vue) --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;frame&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;frame-header&quot;&gt;精美相框&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;frame-content&quot;&gt;</span><br><span class="line">      &lt;!-- 默认插槽 --&gt;</span><br><span class="line">      &lt;slot&gt;这里放默认照片&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;frame-footer&quot;&gt;2023年&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;frame&gt;</span><br><span class="line">      &lt;!-- 插入到默认插槽的内容 --&gt;</span><br><span class="line">      &lt;img src=&quot;./family-photo.jpg&quot; alt=&quot;家庭照片&quot; /&gt;</span><br><span class="line">    &lt;/frame&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;frame&gt;</span><br><span class="line">      &lt;!-- 另一个不同的内容 --&gt;</span><br><span class="line">      &lt;img src=&quot;./vacation-photo.jpg&quot; alt=&quot;度假照片&quot; /&gt;</span><br><span class="line">    &lt;/frame&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 不提供内容时会显示默认内容 --&gt;</span><br><span class="line">    &lt;frame&gt;&lt;/frame&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import Frame from &#x27;./Frame.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="具名插槽">具名插槽</h3>
<p><strong>技术解释</strong>：具名插槽允许在同一个组件中定义多个插槽，并通过名称区分。</p>
<p><strong>生活案例</strong>：想象一封电子邮件模板（子组件）。它有不同的部分：标题、正文和签名。具名插槽就像这个模板中预留的不同区域，你可以分别填入不同内容，每个内容都放在指定的位置。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 (EmailTemplate.vue) --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;email&quot;&gt;</span><br><span class="line">    &lt;header&gt;</span><br><span class="line">      &lt;slot name=&quot;header&quot;&gt;默认标题&lt;/slot&gt;</span><br><span class="line">    &lt;/header&gt;</span><br><span class="line">    &lt;main&gt;</span><br><span class="line">      &lt;slot name=&quot;content&quot;&gt;默认正文内容...&lt;/slot&gt;</span><br><span class="line">    &lt;/main&gt;</span><br><span class="line">    &lt;footer&gt;</span><br><span class="line">      &lt;slot name=&quot;signature&quot;&gt;默认签名&lt;/slot&gt;</span><br><span class="line">    &lt;/footer&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;email-template&gt;</span><br><span class="line">      &lt;template #header&gt;</span><br><span class="line">        &lt;h2&gt;会议邀请&lt;/h2&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;template #content&gt;</span><br><span class="line">        &lt;p&gt;亲爱的团队成员，&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;我们将于下周一举行季度回顾会议，请准时参加。&lt;/p&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      </span><br><span class="line">      &lt;template #signature&gt;</span><br><span class="line">        &lt;p&gt;此致，&lt;/p&gt;</span><br><span class="line">        &lt;p&gt;项目经理&lt;/p&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/email-template&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import EmailTemplate from &#x27;./EmailTemplate.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="作用域插槽">作用域插槽</h3>
<p><strong>技术解释</strong>：作用域插槽允许子组件将数据回传给父组件的插槽内容。</p>
<p><strong>生活案例</strong>：想象一个图书馆借书系统（子组件）。作用域插槽就像图书馆提供的借书记录查询服务，图书馆（子组件）拥有所有借书数据，但允许读者（父组件）决定如何展示和使用这些数据，比如按日期排序或只查看特定类型的书籍。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 (BookList.vue) --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;图书馆藏书列表&lt;/h2&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li v-for=&quot;book in books&quot; :key=&quot;book.id&quot;&gt;</span><br><span class="line">        &lt;!-- 将book数据传递给父组件的插槽 --&gt;</span><br><span class="line">        &lt;slot :book=&quot;book&quot; :checkout=&quot;checkoutBook&quot;&gt;</span><br><span class="line">          &#123;&#123; book.title &#125;&#125; (默认显示)</span><br><span class="line">        &lt;/slot&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const books = ref([</span><br><span class="line">  &#123; id: 1, title: &#x27;战争与和平&#x27;, author: &#x27;托尔斯泰&#x27;, available: true &#125;,</span><br><span class="line">  &#123; id: 2, title: &#x27;百年孤独&#x27;, author: &#x27;马尔克斯&#x27;, available: false &#125;,</span><br><span class="line">  &#123; id: 3, title: &#x27;红楼梦&#x27;, author: &#x27;曹雪芹&#x27;, available: true &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">function checkoutBook(bookId) &#123;</span><br><span class="line">  const book = books.value.find(b =&gt; b.id === bookId)</span><br><span class="line">  if (book &amp;&amp; book.available) &#123;</span><br><span class="line">    book.available = false</span><br><span class="line">    return true</span><br><span class="line">  &#125;</span><br><span class="line">  return false</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;book-list&gt;</span><br><span class="line">      &lt;template #default=&quot;&#123; book, checkout &#125;&quot;&gt;</span><br><span class="line">        &lt;div :class=&quot;&#123; &#x27;unavailable&#x27;: !book.available &#125;&quot;&gt;</span><br><span class="line">          &lt;h3&gt;&#123;&#123; book.title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">          &lt;p&gt;作者: &#123;&#123; book.author &#125;&#125;&lt;/p&gt;</span><br><span class="line">          &lt;p&gt;状态: &#123;&#123; book.available ? &#x27;可借阅&#x27; : &#x27;已借出&#x27; &#125;&#125;&lt;/p&gt;</span><br><span class="line">          &lt;button </span><br><span class="line">            v-if=&quot;book.available&quot; </span><br><span class="line">            @click=&quot;checkout(book.id)&quot;</span><br><span class="line">          &gt;</span><br><span class="line">            借阅</span><br><span class="line">          &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/book-list&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import BookList from &#x27;./BookList.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.unavailable &#123;</span><br><span class="line">  opacity: 0.6;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="组合式api">组合式API</h2>
<h3 id="shallowref与shallowreactive">shallowRef与shallowReactive</h3>
<p><strong>技术解释</strong>：shallowRef和shallowReactive创建浅层响应式对象，只有对象的顶层属性是响应式的，嵌套对象不会被转换。</p>
<p><strong>生活案例</strong>：想象一个邮箱系统。普通的ref/reactive就像完整的邮件追踪服务，从寄件到收件的每一步都会通知你（深层响应）。而shallow版本就像只追踪包裹是否已送达（顶层响应），但不会告诉你包裹内部物品的状态变化。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;邮件系统&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;updateDeep&quot;&gt;更新深层属性 (reactive)&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;updateShallow&quot;&gt;更新深层属性 (shallowReactive)&lt;/button&gt;</span><br><span class="line">    &lt;pre&gt;&#123;&#123; normalPackage &#125;&#125;&lt;/pre&gt;</span><br><span class="line">    &lt;pre&gt;&#123;&#123; shallowPackage &#125;&#125;&lt;/pre&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, shallowReactive &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 完全响应式</span><br><span class="line">const normalPackage = reactive(&#123;</span><br><span class="line">  status: &#x27;运送中&#x27;,</span><br><span class="line">  details: &#123;</span><br><span class="line">    items: [&#x27;书&#x27;, &#x27;衣服&#x27;],</span><br><span class="line">    weight: &#x27;2kg&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 浅层响应式</span><br><span class="line">const shallowPackage = shallowReactive(&#123;</span><br><span class="line">  status: &#x27;运送中&#x27;,</span><br><span class="line">  details: &#123;</span><br><span class="line">    items: [&#x27;电子产品&#x27;, &#x27;文具&#x27;],</span><br><span class="line">    weight: &#x27;1kg&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function updateDeep() &#123;</span><br><span class="line">  // 这会触发视图更新</span><br><span class="line">  normalPackage.details.items.push(&#x27;新物品&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function updateShallow() &#123;</span><br><span class="line">  // 这不会触发视图更新，因为details是非响应式的</span><br><span class="line">  shallowPackage.details.items.push(&#x27;新物品&#x27;)</span><br><span class="line">  </span><br><span class="line">  // 但这会触发更新，因为status是顶层属性</span><br><span class="line">  // shallowPackage.status = &#x27;已送达&#x27;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="readonly与shallowreadonly">readonly与shallowReadonly</h3>
<p><strong>技术解释</strong>：readonly创建一个深层只读代理，任何嵌套属性都不可修改，而shallowReadonly只使顶层属性为只读。</p>
<p><strong>生活案例</strong>：想象一份合同文档。readonly就像一份完全盖章的合同，所有条款和附件都不能修改（深层只读）。而shallowReadonly就像只有主要条款不能修改，但附件内容可以调整（浅层只读）。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;合同系统&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;tryModify&quot;&gt;尝试修改合同&lt;/button&gt;</span><br><span class="line">    &lt;pre&gt;&#123;&#123; contractInfo &#125;&#125;&lt;/pre&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, readonly, shallowReadonly &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 原始合同数据</span><br><span class="line">const originalContract = reactive(&#123;</span><br><span class="line">  title: &#x27;服务协议&#x27;,</span><br><span class="line">  signDate: &#x27;2023-05-15&#x27;,</span><br><span class="line">  terms: &#123;</span><br><span class="line">    duration: &#x27;12个月&#x27;,</span><br><span class="line">    payment: &#x27;5000元/月&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 完全只读版本</span><br><span class="line">const readonlyContract = readonly(originalContract)</span><br><span class="line"></span><br><span class="line">// 浅层只读版本</span><br><span class="line">const shallowReadonlyContract = shallowReadonly(originalContract)</span><br><span class="line"></span><br><span class="line">// 用于展示的合同信息</span><br><span class="line">const contractInfo = reactive(&#123;</span><br><span class="line">  original: originalContract,</span><br><span class="line">  readonly: readonlyContract,</span><br><span class="line">  shallowReadonly: shallowReadonlyContract</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function tryModify() &#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    // 这会成功</span><br><span class="line">    originalContract.title = &#x27;更新的服务协议&#x27;</span><br><span class="line">    </span><br><span class="line">    try &#123;</span><br><span class="line">      // 这会失败并显示警告</span><br><span class="line">      readonlyContract.title = &#x27;尝试修改只读合同&#x27;</span><br><span class="line">    &#125; catch (e) &#123;</span><br><span class="line">      console.log(&#x27;无法修改readonly合同的顶层属性&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    try &#123;</span><br><span class="line">      // 这会失败并显示警告</span><br><span class="line">      readonlyContract.terms.duration = &#x27;24个月&#x27;</span><br><span class="line">    &#125; catch (e) &#123;</span><br><span class="line">      console.log(&#x27;无法修改readonly合同的嵌套属性&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    try &#123;</span><br><span class="line">      // 这会失败并显示警告</span><br><span class="line">      shallowReadonlyContract.title = &#x27;尝试修改浅层只读合同&#x27;</span><br><span class="line">    &#125; catch (e) &#123;</span><br><span class="line">      console.log(&#x27;无法修改shallowReadonly合同的顶层属性&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 这会成功，因为嵌套属性不是只读的</span><br><span class="line">    shallowReadonlyContract.terms.duration = &#x27;24个月&#x27;</span><br><span class="line">    </span><br><span class="line">    console.log(&#x27;修改操作完成&#x27;)</span><br><span class="line">  &#125; catch (e) &#123;</span><br><span class="line">    console.error(e)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="toraw与markraw">toRaw与markRaw</h3>
<p><strong>技术解释</strong>：toRaw返回响应式对象的原始对象，markRaw标记一个对象永远不会被转为响应式。</p>
<p><strong>生活案例</strong>：想象一个智能家居系统。toRaw就像临时关闭智能功能，获取设备的原始状态进行维护；markRaw则像永久将某些设备（如老式电视）排除在智能系统外，它们的状态变化永远不会触发自动化操作。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;智能家居控制面板&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;updateDevice&quot;&gt;更新设备状态&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;getOriginalState&quot;&gt;获取原始状态&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;addNewDevice&quot;&gt;添加新设备&lt;/button&gt;</span><br><span class="line">    &lt;pre&gt;&#123;&#123; deviceInfo &#125;&#125;&lt;/pre&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; reactive, toRaw, markRaw, ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 响应式智能设备列表</span><br><span class="line">const smartDevices = reactive(&#123;</span><br><span class="line">  livingRoom: &#123;</span><br><span class="line">    lights: &#123; status: &#x27;on&#x27;, brightness: 80 &#125;,</span><br><span class="line">    thermostat: &#123; status: &#x27;on&#x27;, temperature: 22 &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  kitchen: &#123;</span><br><span class="line">    lights: &#123; status: &#x27;off&#x27;, brightness: 0 &#125;,</span><br><span class="line">    refrigerator: &#123; status: &#x27;on&#x27;, temperature: 4 &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 用于展示的信息</span><br><span class="line">const deviceInfo = ref(&#123;</span><br><span class="line">  smartDevices,</span><br><span class="line">  rawState: null,</span><br><span class="line">  updateCount: 0</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 更新设备状态</span><br><span class="line">function updateDevice() &#123;</span><br><span class="line">  smartDevices.livingRoom.lights.brightness += 5</span><br><span class="line">  if (smartDevices.livingRoom.lights.brightness &gt; 100) &#123;</span><br><span class="line">    smartDevices.livingRoom.lights.brightness = 100</span><br><span class="line">  &#125;</span><br><span class="line">  deviceInfo.value.updateCount++</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 获取原始状态（不触发响应式更新）</span><br><span class="line">function getOriginalState() &#123;</span><br><span class="line">  // 使用toRaw获取原始对象</span><br><span class="line">  const rawDevices = toRaw(smartDevices)</span><br><span class="line">  deviceInfo.value.rawState = rawDevices</span><br><span class="line">  </span><br><span class="line">  // 修改原始对象不会触发视图更新</span><br><span class="line">  rawDevices.livingRoom.thermostat.temperature = 25</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 添加新设备（使用markRaw标记为非响应式）</span><br><span class="line">function addNewDevice() &#123;</span><br><span class="line">  // 创建一个永远不会成为响应式的设备对象</span><br><span class="line">  const oldTV = markRaw(&#123;</span><br><span class="line">    status: &#x27;on&#x27;,</span><br><span class="line">    channel: 5,</span><br><span class="line">    volume: 30</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br><span class="line">  // 即使添加到响应式对象中，oldTV也不会变成响应式的</span><br><span class="line">  smartDevices.livingRoom.tv = oldTV</span><br><span class="line">  </span><br><span class="line">  // 这个修改不会触发更新</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    oldTV.channel = 8</span><br><span class="line">    deviceInfo.value.updateCount++</span><br><span class="line">  &#125;, 1000)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="customref的使用">customRef的使用</h3>
<p><strong>技术解释</strong>：customRef允许创建自定义的响应式引用，可以显式控制依赖追踪和触发更新。</p>
<p><strong>生活案例</strong>：想象一个智能搜索框。普通的ref就像即时搜索，每输入一个字符就立即搜索；而customRef就像带有防抖功能的搜索框，等你停止输入一段时间后才执行搜索，避免频繁无效的搜索请求。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;智能搜索&lt;/h2&gt;</span><br><span class="line">    &lt;input </span><br><span class="line">      type=&quot;text&quot; </span><br><span class="line">      placeholder=&quot;输入搜索内容...&quot; </span><br><span class="line">      v-model=&quot;searchQuery&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">    &lt;p&gt;当前搜索: &#123;&#123; searchQuery &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;搜索结果将在您停止输入后显示&lt;/p&gt;</span><br><span class="line">    &lt;div v-if=&quot;isSearching&quot;&gt;搜索中...&lt;/div&gt;</span><br><span class="line">    &lt;ul v-else-if=&quot;searchResults.length&quot;&gt;</span><br><span class="line">      &lt;li v-for=&quot;(result, index) in searchResults&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">        &#123;&#123; result &#125;&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;p v-else-if=&quot;searchQuery&quot;&gt;无搜索结果&lt;/p&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; customRef, ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 创建一个带防抖功能的ref</span><br><span class="line">function useDebouncedRef(value, delay = 500) &#123;</span><br><span class="line">  let timeout</span><br><span class="line">  return customRef((track, trigger) =&gt; &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        // 追踪依赖</span><br><span class="line">        track()</span><br><span class="line">        return value</span><br><span class="line">      &#125;,</span><br><span class="line">      set(newValue) &#123;</span><br><span class="line">        // 清除之前的定时器</span><br><span class="line">        clearTimeout(timeout)</span><br><span class="line">        // 设置新的定时器，延迟触发更新</span><br><span class="line">        timeout = setTimeout(() =&gt; &#123;</span><br><span class="line">          value = newValue</span><br><span class="line">          // 触发更新</span><br><span class="line">          trigger()</span><br><span class="line">        &#125;, delay)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 使用自定义的防抖ref</span><br><span class="line">const searchQuery = useDebouncedRef(&#x27;&#x27;)</span><br><span class="line">const isSearching = ref(false)</span><br><span class="line">const searchResults = ref([])</span><br><span class="line"></span><br><span class="line">// 监听searchQuery的变化</span><br><span class="line">watch(searchQuery, async (newQuery) =&gt; &#123;</span><br><span class="line">  if (newQuery.trim()) &#123;</span><br><span class="line">    isSearching.value = true</span><br><span class="line">    // 模拟API搜索</span><br><span class="line">    try &#123;</span><br><span class="line">      await new Promise(resolve =&gt; setTimeout(resolve, 1000))</span><br><span class="line">      // 模拟搜索结果</span><br><span class="line">      searchResults.value = [</span><br><span class="line">        `关于 &quot;$&#123;newQuery&#125;&quot; 的结果 1`,</span><br><span class="line">        `关于 &quot;$&#123;newQuery&#125;&quot; 的结果 2`,</span><br><span class="line">        `关于 &quot;$&#123;newQuery&#125;&quot; 的结果 3`</span><br><span class="line">      ]</span><br><span class="line">    &#125; catch (error) &#123;</span><br><span class="line">      console.error(&#x27;搜索出错:&#x27;, error)</span><br><span class="line">      searchResults.value = []</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">      isSearching.value = false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    searchResults.value = []</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="高级特性">高级特性</h2>
<h3 id="teleport">Teleport</h3>
<p><strong>技术解释</strong>：Teleport是一个内置组件，允许将组件的一部分DOM”传送”到组件DOM层次结构之外的DOM节点中。</p>
<p><strong>生活案例</strong>：想象一个购物网站的客服聊天窗口。虽然聊天功能逻辑属于产品页面组件，但聊天窗口需要固定在屏幕右下角，不受页面滚动影响。Teleport就像一个传送门，让聊天窗口的UI可以”传送”到页面底部，而逻辑仍留在原组件中。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;product-page&quot;&gt;</span><br><span class="line">    &lt;h1&gt;产品详情: 智能手表&lt;/h1&gt;</span><br><span class="line">    &lt;div class=&quot;product-info&quot;&gt;</span><br><span class="line">      &lt;img src=&quot;/watch.jpg&quot; alt=&quot;智能手表&quot; /&gt;</span><br><span class="line">      &lt;p&gt;价格: ¥1299&lt;/p&gt;</span><br><span class="line">      &lt;button @click=&quot;showChat = true&quot;&gt;联系客服&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- 使用Teleport将聊天窗口传送到body底部 --&gt;</span><br><span class="line">    &lt;teleport to=&quot;body&quot;&gt;</span><br><span class="line">      &lt;div v-if=&quot;showChat&quot; class=&quot;chat-window&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;chat-header&quot;&gt;</span><br><span class="line">          &lt;h3&gt;客服中心&lt;/h3&gt;</span><br><span class="line">          &lt;button @click=&quot;showChat = false&quot;&gt;关闭&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;chat-messages&quot;&gt;</span><br><span class="line">          &lt;p class=&quot;message system&quot;&gt;客服小王为您服务&lt;/p&gt;</span><br><span class="line">          &lt;p class=&quot;message incoming&quot;&gt;有什么可以帮您的吗？&lt;/p&gt;</span><br><span class="line">          &lt;p v-if=&quot;userMessage&quot; class=&quot;message outgoing&quot;&gt;</span><br><span class="line">            &#123;&#123; userMessage &#125;&#125;</span><br><span class="line">          &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;chat-input&quot;&gt;</span><br><span class="line">          &lt;input </span><br><span class="line">            v-model=&quot;newMessage&quot; </span><br><span class="line">            @keyup.enter=&quot;sendMessage&quot;</span><br><span class="line">            placeholder=&quot;输入消息...&quot; </span><br><span class="line">          /&gt;</span><br><span class="line">          &lt;button @click=&quot;sendMessage&quot;&gt;发送&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/teleport&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const showChat = ref(false)</span><br><span class="line">const newMessage = ref(&#x27;&#x27;)</span><br><span class="line">const userMessage = ref(&#x27;&#x27;)</span><br><span class="line"></span><br><span class="line">function sendMessage() &#123;</span><br><span class="line">  if (newMessage.value.trim()) &#123;</span><br><span class="line">    userMessage.value = newMessage.value</span><br><span class="line">    newMessage.value = &#x27;&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.product-page &#123;</span><br><span class="line">  max-width: 800px;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  padding: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 聊天窗口样式 */</span><br><span class="line">.chat-window &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  bottom: 20px;</span><br><span class="line">  right: 20px;</span><br><span class="line">  width: 300px;</span><br><span class="line">  height: 400px;</span><br><span class="line">  border: 1px solid #ccc;</span><br><span class="line">  background: white;</span><br><span class="line">  box-shadow: 0 0 10px rgba(0,0,0,0.1);</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-direction: column;</span><br><span class="line">  z-index: 1000;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.chat-header &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">  align-items: center;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  background: #f0f0f0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.chat-messages &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  overflow-y: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.message &#123;</span><br><span class="line">  margin-bottom: 10px;</span><br><span class="line">  padding: 8px;</span><br><span class="line">  border-radius: 4px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.system &#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">  color: #888;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.incoming &#123;</span><br><span class="line">  background: #f0f0f0;</span><br><span class="line">  align-self: flex-start;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.outgoing &#123;</span><br><span class="line">  background: #e3f2fd;</span><br><span class="line">  align-self: flex-end;</span><br><span class="line">  text-align: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.chat-input &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  padding: 10px;</span><br><span class="line">  border-top: 1px solid #eee;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.chat-input input &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  padding: 8px;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="suspense">Suspense</h3>
<p><strong>技术解释</strong>：Suspense是一个内置组件，用于协调对异步依赖的处理，可以在等待异步组件时显示加载状态。</p>
<p><strong>生活案例</strong>：想象一个在线电影平台。当用户点击观看电影时，需要等待视频加载完成。Suspense就像一个耐心的影院经理，在视频加载期间显示”加载中”的画面，等视频准备好后再开始播放。</p>
<p><strong>代码示例</strong>： <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;movie-platform&quot;&gt;</span><br><span class="line">    &lt;h1&gt;在线电影平台&lt;/h1&gt;</span><br><span class="line">    &lt;div class=&quot;movie-list&quot;&gt;</span><br><span class="line">      &lt;div </span><br><span class="line">        v-for=&quot;movie in movies&quot; </span><br><span class="line">        :key=&quot;movie.id&quot; </span><br><span class="line">        class=&quot;movie-card&quot; </span><br><span class="line">        @click=&quot;selectMovie(movie)&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &lt;img :src=&quot;movie.poster&quot; :alt=&quot;movie.title&quot; /&gt;</span><br><span class="line">        &lt;h2&gt;&#123;&#123; movie.title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;div v-if=&quot;selectedMovie&quot; class=&quot;movie-player&quot;&gt;</span><br><span class="line">      &lt;h2&gt;&#123;&#123; selectedMovie.title &#125;&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;Suspense&gt;</span><br><span class="line">        &lt;template #default&gt;</span><br><span class="line">          &lt;video-player :src=&quot;selectedMovie.video&quot; /&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">        &lt;template #fallback&gt;</span><br><span class="line">          &lt;div class=&quot;loading&quot;&gt;视频加载中...&lt;/div&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">      &lt;/Suspense&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import VideoPlayer from &#x27;./VideoPlayer.vue&#x27;</span><br><span class="line"></span><br><span class="line">const movies = ref([</span><br><span class="line">  &#123; id: 1, title: &#x27;肖申克的救赎&#x27;, poster: &#x27;/poster1.jpg&#x27;, video: &#x27;/video1.mp4&#x27; &#125;,</span><br><span class="line">  &#123; id: 2, title: &#x27;阿甘正传&#x27;, poster: &#x27;/poster2.jpg&#x27;, video: &#x27;/video2.mp4&#x27; &#125;,</span><br><span class="line">  &#123; id: 3, title: &#x27;霸王别姬&#x27;, poster: &#x27;/poster3.jpg&#x27;, video: &#x27;/video3.mp4&#x27; &#125;</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">const selectedMovie = ref(null)</span><br><span class="line"></span><br><span class="line">function selectMovie(movie) &#123;</span><br><span class="line">  selectedMovie.value = movie</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.movie-platform &#123;</span><br><span class="line">  max-width: 1200px;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">  padding: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.movie-list &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  flex-wrap: wrap;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.movie-card &#123;</span><br><span class="line">  width: 300px;</span><br><span class="line">  margin-bottom: 20px;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.movie-player &#123;</span><br><span class="line">  margin-top: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.loading &#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">  color: #888;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="高频面试题解析">高频面试题解析</h3>
<h4 id="vue3中的响应式原理是什么">1. Vue3中的响应式原理是什么？</h4>
<p><strong>技术解释</strong>：Vue3的响应式原理基于ES6的Proxy，能够直接监听对象和数组的变化。当数据发生变化时，Vue会自动更新相关的DOM，保持UI和数据的同步。</p>
<p><strong>生活案例</strong>：想象一个智能家居系统。当你调整温度设定（数据变化）时，空调会自动响应并调整工作模式（UI更新）。Vue3的响应式系统就像这个智能家居的控制中心，监测所有设定的变化并通知相关设备做出反应。</p>
<h4 id="vue3中的组件通信方式有哪些">2. Vue3中的组件通信方式有哪些？</h4>
<p><strong>技术解释</strong>：Vue3中的组件通信方式包括props和emit、v-model、<span class="math inline"><em>r</em><em>e</em><em>f</em><em>s</em><em>和</em></span>parent、provide/inject、$attrs和插槽系统。</p>
<p><strong>生活案例</strong>：想象一个家族WhatsApp群组。家族长辈（祖先组件）在群里发布重要信息（provide数据），所有家族成员（后代组件）无论层级关系如何，都能直接接收到这些信息（inject数据），而不需要通过中间人传话。</p>
<h4 id="vue3中的组合式api是什么">3. Vue3中的组合式API是什么？</h4>
<p><strong>技术解释</strong>：Vue3中的组合式API是一组基于函数的API，允许在不使用选项式API的情况下组织和重用组件逻辑。它包括ref、reactive、computed、watch、生命周期钩子等函数。</p>
<p><strong>生活案例</strong>：想象一个智能家居系统。组合式API就像一个工具箱，里面有各种工具（函数），你可以根据需要选择和组合使用，构建出不同的智能功能。</p>
<h4 id="vue3中的teleport是什么">4. Vue3中的Teleport是什么？</h4>
<p><strong>技术解释</strong>：Teleport是一个内置组件，允许将组件的一部分DOM”传送”到组件DOM层次结构之外的DOM节点中。</p>
<p><strong>生活案例</strong>：想象一个购物网站的客服聊天窗口。虽然聊天功能逻辑属于产品页面组件，但聊天窗口需要固定在屏幕右下角，不受页面滚动影响。Teleport就像一个传送门，让聊天窗口的UI可以”传送”到页面底部，而逻辑仍留在原组件中。</p>
<h4 id="vue3中的suspense是什么">5. Vue3中的Suspense是什么？</h4>
<p><strong>技术解释</strong>：Suspense是一个内置组件，用于协调对异步依赖的处理，可以在等待异步组件时显示加载状态。</p>
<p><strong>生活案例</strong>：想象一个在线电影平台。当用户点击观看电影时，需要等待视频加载完成。Suspense就像一个耐心的影院经理，在视频加载期间显示”加载中”的画面，等视频准备好后再开始播放。</p>

    </div>

    
    
      
<div class="signature signature-post">Best Tao.</div>

    

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/03/16/SpringBoot-Vue.js-Axios%E6%90%AD%E5%BB%BAdemo/" rel="prev" title="SpringBoot-Vue.js-Axios搭建demo">
                  <i class="fa fa-chevron-left"></i> SpringBoot-Vue.js-Axios搭建demo
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/03/26/mcp%E6%8A%80%E6%9C%AF/" rel="next" title="mcp技术">
                  mcp技术 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">LuoTao</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>


  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"js":{"url":"https://cdn.jsdelivr.net/npm/mermaid@11.5.0/dist/mermaid.min.js","integrity":"sha256-2obLuIPcceEhkE3G09G33hBdmE55ivVcZUlcKcGNHjU="}}</script>
  <script src="/js/third-party/tags/mermaid.js"></script>



  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"luotaofun","repo":"hexo-blog-comments","client_id":"Ov23li6vpjnB5BV9Bb5T","client_secret":"cfc9f5ec04a4a2f7f610ceefd6bf6176d6409461","admin_user":"luotaofun","distraction_free_mode":false,"language":"zh-CN","js":{"url":"https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"85bc939f76eaf284b733363b7904274b"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
